<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>大事件管理系统项目</title><meta name="description" content="编程"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="后台数据管理系统 - 项目架构设计在线演示：https://fe-bigevent-web.itheima.net/login
接口文档:   https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835
接口根路径：  http://big-event-vue-api-t.itheima.net
本项目的技术栈 本项目技术栈基于 ES6、vue3、pinia、vue-router 、vite 、axios 和 element-plus
pnpm 包管理器 - 创建项目一些优势：比同类工具快 2倍 左右、节省磁盘空间… https://www.pnpm.cn/
安装方式：
npm install -g p.."><meta name="generator" content="Hexo 5.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">天明's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">大事件管理系统项目</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">后台数据管理系统 - 项目架构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pnpm-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">pnpm 包管理器 - 创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ESLint-prettier-%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC"><span class="toc-text">ESLint &amp; prettier 配置代码风格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E-husky-%E7%9A%84%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="toc-text">基于 husky  的代码检查工作流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95"><span class="toc-text">调整项目目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VueRouter4-%E8%B7%AF%E7%94%B1%E4%BB%A3%E7%A0%81%E8%A7%A3%E6%9E%90"><span class="toc-text">VueRouter4 路由代码解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-element-ui-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">引入 element-ui 组件库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia-%E6%9E%84%E5%BB%BA%E7%94%A8%E6%88%B7%E4%BB%93%E5%BA%93-%E5%92%8C-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">Pinia - 构建用户仓库 和 持久化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia-%E9%85%8D%E7%BD%AE%E4%BB%93%E5%BA%93%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86"><span class="toc-text">Pinia - 配置仓库统一管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92-%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E8%AE%BE%E8%AE%A1"><span class="toc-text">数据交互 - 请求工具设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA-axios-%E5%AE%9E%E4%BE%8B"><span class="toc-text">1. 创建 axios 实例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%8C%E6%88%90-axios-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-text">2. 完成 axios 基本配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E6%95%B4%E4%BD%93%E8%B7%AF%E7%94%B1%E8%AE%BE%E8%AE%A1"><span class="toc-text">首页整体路由设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2-element-plus-%E8%A1%A8%E5%8D%95-%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">登录注册页面 [element-plus 表单 &amp; 表单校验]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95-%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84-%E5%9F%BA%E6%9C%AC%E5%88%87%E6%8D%A2"><span class="toc-text">注册登录 静态结构 &amp; 基本切换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">注册功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E6%A0%A1%E9%AA%8C"><span class="toc-text">实现注册校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E5%89%8D%E7%9A%84%E9%A2%84%E6%A0%A1%E9%AA%8C"><span class="toc-text">注册前的预校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85-api-%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD"><span class="toc-text">封装 api 实现注册功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-text">登录功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">实现登录校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E5%89%8D%E7%9A%84%E9%A2%84%E6%A0%A1%E9%AA%8C-%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F"><span class="toc-text">登录前的预校验 &amp; 登录成功</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5-layout-%E6%9E%B6%E5%AD%90-element-plus-%E8%8F%9C%E5%8D%95"><span class="toc-text">首页 layout 架子 [element-plus 菜单]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9E%B6%E5%AD%90%E6%8B%86%E8%A7%A3"><span class="toc-text">基本架子拆解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E8%AE%BF%E9%97%AE%E6%8B%A6%E6%88%AA"><span class="toc-text">登录访问拦截</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96-%E6%B8%B2%E6%9F%93"><span class="toc-text">用户基本信息获取&amp;渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BA%E5%8A%9F%E8%83%BD-element-plus-%E7%A1%AE%E8%AE%A4%E6%A1%86"><span class="toc-text">退出功能 [element-plus 确认框]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E9%A1%B5%E9%9D%A2-element-plus-%E8%A1%A8%E6%A0%BC"><span class="toc-text">文章分类页面 - [element-plus 表格]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9E%B6%E5%AD%90-PageContainer"><span class="toc-text">基本架子 - PageContainer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E6%B8%B2%E6%9F%93"><span class="toc-text">文章分类渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85API-%E8%AF%B7%E6%B1%82%E8%8E%B7%E5%8F%96%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE"><span class="toc-text">封装API - 请求获取表格数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el-table-%E8%A1%A8%E6%A0%BC%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93"><span class="toc-text">el-table 表格动态渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el-table-%E8%A1%A8%E6%A0%BC-loading-%E6%95%88%E6%9E%9C"><span class="toc-text">el-table 表格 loading 效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E6%B7%BB%E5%8A%A0%E7%BC%96%E8%BE%91-element-plus-%E5%BC%B9%E5%B1%82"><span class="toc-text">文章分类添加编辑 [element-plus 弹层]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E6%98%BE%E7%A4%BA%E5%BC%B9%E5%B1%82"><span class="toc-text">点击显示弹层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%BC%B9%E5%B1%82%E7%BB%84%E4%BB%B6-ChannelEdit"><span class="toc-text">封装弹层组件 ChannelEdit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%BC%B9%E5%B1%82%E8%A1%A8%E5%8D%95"><span class="toc-text">准备弹层表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E6%8F%90%E4%BA%A4"><span class="toc-text">确认提交</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E5%88%A0%E9%99%A4"><span class="toc-text">文章分类删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2-element-plus-%E5%BC%BA%E5%8C%96"><span class="toc-text">文章管理页面 - [element-plus 强化]</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">文章列表渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9E%B6%E5%AD%90%E6%90%AD%E5%BB%BA"><span class="toc-text">基本架子搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E8%8B%B1%E5%9B%BD%E9%99%85%E5%8C%96%E5%A4%84%E7%90%86"><span class="toc-text">中英国际化处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB%E9%80%89%E6%8B%A9"><span class="toc-text">文章分类选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85-API-%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%AF%B7%E6%B1%82%E6%B8%B2%E6%9F%93"><span class="toc-text">封装 API 接口，请求渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%B8%B2%E6%9F%93-element-plus-%E5%88%86%E9%A1%B5"><span class="toc-text">分页渲染 [element-plus 分页]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-loading-%E5%A4%84%E7%90%86"><span class="toc-text">添加 loading 处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2-%E5%92%8C-%E9%87%8D%E7%BD%AE%E5%8A%9F%E8%83%BD"><span class="toc-text">搜索 和 重置功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83-%E4%BF%AE%E6%94%B9-element-plus-%E6%8A%BD%E5%B1%89"><span class="toc-text">文章发布&amp;修改 [element-plus - 抽屉]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E6%98%BE%E7%A4%BA%E6%8A%BD%E5%B1%89"><span class="toc-text">点击显示抽屉</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%8A%BD%E5%B1%89%E7%BB%84%E4%BB%B6-ArticleEdit"><span class="toc-text">封装抽屉组件 ArticleEdit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%96%84%E6%8A%BD%E5%B1%89%E8%A1%A8%E5%8D%95%E7%BB%93%E6%9E%84"><span class="toc-text">完善抽屉表单结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6-element-plus-%E6%96%87%E4%BB%B6%E9%A2%84%E8%A7%88"><span class="toc-text">上传文件 [element-plus - 文件预览]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8-vue-quill"><span class="toc-text">富文本编辑器 [ vue-quill ]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD"><span class="toc-text">添加文章功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AE%8C%E6%88%90%E5%90%8E%E7%9A%84%E5%86%85%E5%AE%B9%E9%87%8D%E7%BD%AE"><span class="toc-text">添加完成后的内容重置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%96%87%E7%AB%A0%E5%9B%9E%E6%98%BE"><span class="toc-text">编辑文章回显</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%96%87%E7%AB%A0%E5%8A%9F%E8%83%BD"><span class="toc-text">编辑文章功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%A0%E9%99%A4"><span class="toc-text">文章删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ChatGPT-Copilot"><span class="toc-text">ChatGPT &amp; Copilot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AI-%E7%9A%84%E8%AE%A4%E7%9F%A5-%E8%AE%B2%E8%A7%A3%E5%86%85%E5%AE%B9%E8%AF%B4%E6%98%8E"><span class="toc-text">AI 的认知 &amp; 讲解内容说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ChatGPT-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-Prompt-%E4%BC%98%E5%8C%96"><span class="toc-text">ChatGPT 的基本使用 - Prompt 优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E5%89%8D%E7%AB%AF%E7%AE%80%E5%8E%86"><span class="toc-text">案例 - 前端简历</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Prompt-%E4%BC%98%E5%8C%96%E5%89%8D%EF%BC%9A"><span class="toc-text">Prompt 优化前：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Prompt-%E4%BC%98%E5%8C%96%E5%90%8E%EF%BC%9A"><span class="toc-text">Prompt 优化后：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7-Github-Copilot-%E6%99%BA%E8%83%BD%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">工具 Github Copilot 智能生成代码的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-text">安装步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-text">使用说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E5%9F%BA%E6%9C%AC%E8%B5%84%E6%96%99"><span class="toc-text">个人中心项目实战 - 基本资料</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84-%E6%A0%A1%E9%AA%8C%E5%A4%84%E7%90%86"><span class="toc-text">静态结构 + 校验处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%9B%B4%E6%96%B0%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-text">封装接口，更新个人信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E6%9B%B4%E6%8D%A2%E5%A4%B4%E5%83%8F"><span class="toc-text">个人中心项目实战 - 更换头像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84"><span class="toc-text">静态结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87"><span class="toc-text">选择预览图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%A4%B4%E5%83%8F"><span class="toc-text">上传头像</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E9%87%8D%E7%BD%AE%E5%AF%86%E7%A0%81"><span class="toc-text">个人中心项目实战 - 重置密码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%BB%93%E6%9E%84-%E6%A0%A1%E9%AA%8C%E5%A4%84%E7%90%86-1"><span class="toc-text">静态结构 + 校验处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%9B%B4%E6%96%B0%E5%AF%86%E7%A0%81%E4%BF%A1%E6%81%AF"><span class="toc-text">封装接口，更新密码信息</span></a></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E9%A1%B9%E7%9B%AE"><i class="tag post-item-tag">项目</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">大事件管理系统项目</h1><time class="has-text-grey" datetime="2023-12-20T06:16:53.000Z">2023-12-20</time><article class="mt-2 post-content"><h1 id="后台数据管理系统-项目架构设计"><a href="#后台数据管理系统-项目架构设计" class="headerlink" title="后台数据管理系统 - 项目架构设计"></a>后台数据管理系统 - 项目架构设计</h1><p>在线演示：<a target="_blank" rel="noopener" href="https://fe-bigevent-web.itheima.net/login">https://fe-bigevent-web.itheima.net/login</a></p>
<p>接口文档:   <a target="_blank" rel="noopener" href="https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835">https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835</a></p>
<p><strong>接口根路径：</strong>  <a target="_blank" rel="noopener" href="http://big-event-vue-api-t.itheima.net/">http://big-event-vue-api-t.itheima.net</a></p>
<p>本项目的技术栈 本项目技术栈基于 <a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/">ES6</a>、<a target="_blank" rel="noopener" href="https://cn.vuejs.org/index.html">vue3</a>、<a target="_blank" rel="noopener" href="https://pinia.web3doc.top/">pinia</a>、<a target="_blank" rel="noopener" href="https://router.vuejs.org/">vue-router</a> 、vite 、axios 和 <a target="_blank" rel="noopener" href="https://element-plus.org/">element-plus</a></p>
<h2 id="pnpm-包管理器-创建项目"><a href="#pnpm-包管理器-创建项目" class="headerlink" title="pnpm 包管理器 - 创建项目"></a>pnpm 包管理器 - 创建项目</h2><p>一些优势：比同类工具快 2倍 左右、节省磁盘空间… <a target="_blank" rel="noopener" href="https://www.pnpm.cn/">https://www.pnpm.cn/</a></p>
<p>安装方式：</p>
<pre><code>npm install -g pnpm
</code></pre>
<p>创建项目：</p>
<pre><code>pnpm create vue
</code></pre>
<h2 id="ESLint-prettier-配置代码风格"><a href="#ESLint-prettier-配置代码风格" class="headerlink" title="ESLint &amp; prettier 配置代码风格"></a>ESLint &amp; prettier 配置代码风格</h2><p><strong>环境同步：</strong></p>
<ol>
<li><strong>安装了插件 ESlint，开启保存自动修复</strong></li>
<li><strong>禁用了插件 Prettier，并关闭保存自动格式化</strong></li>
</ol>
<pre><code class="jsx">// ESlint插件 + Vscode配置 实现自动格式化修复
"editor.codeActionsOnSave": {
    "source.fixAll": true
},
"editor.formatOnSave": false,
</code></pre>
<p><strong>配置文件 .eslintrc.cjs</strong></p>
<ol>
<li><p>prettier 风格配置 <a target="_blank" rel="noopener" href="https://prettier.io/docs/en/options.html">https://prettier.io</a></p>
<ol>
<li><p>单引号</p>
</li>
<li><p>不使用分号</p>
</li>
<li><p>每行宽度至多80字符</p>
</li>
<li><p>不加对象|数组最后逗号</p>
</li>
<li><p>换行符号不限制（win mac 不一致）</p>
</li>
</ol>
</li>
<li><p>vue组件名称多单词组成（忽略index.vue）</p>
</li>
<li><p>props解构（关闭）</p>
</li>
</ol>
<pre><code class="jsx">  rules: {
    'prettier/prettier': [
      'warn',
      {
        singleQuote: true, // 单引号
        semi: false, // 无分号
        printWidth: 80, // 每行宽度至多80字符
        trailingComma: 'none', // 不加对象|数组最后逗号
        endOfLine: 'auto' // 换行符号不限制（win mac 不一致）
      }
    ],
    'vue/multi-word-component-names': [
      'warn',
      {
        ignores: ['index'] // vue组件名称多单词组成（忽略index.vue）
      }
    ],
    'vue/no-setup-props-destructure': ['off'], // 关闭 props 解构的校验
    // 💡 添加未定义变量错误提示，create-vue@3.6.3 关闭，这里加上是为了支持下一个章节演示。
    'no-undef': 'error'
  }
</code></pre>
<h2 id="基于-husky-的代码检查工作流"><a href="#基于-husky-的代码检查工作流" class="headerlink" title="基于 husky  的代码检查工作流"></a>基于 husky  的代码检查工作流</h2><p>husky 是一个 git hooks 工具  ( git的钩子工具，可以在特定时机执行特定的命令 )</p>
<p><strong>husky 配置</strong></p>
<ol>
<li><p>git初始化 git init</p>
</li>
<li><p>初始化 husky 工具配置  <a target="_blank" rel="noopener" href="https://typicode.github.io/husky/">https://typicode.github.io/husky/</a></p>
</li>
</ol>
<pre><code class="jsx">pnpm dlx husky-init &amp;&amp; pnpm install
</code></pre>
<ol start="3">
<li>修改 .husky/pre-commit 文件</li>
</ol>
<pre><code class="jsx">pnpm lint
</code></pre>
<p><strong>问题：</strong>默认进行的是全量检查，耗时问题，历史问题。</p>
<p><strong>lint-staged 配置</strong></p>
<ol>
<li>安装</li>
</ol>
<pre><code class="jsx">pnpm i lint-staged -D
</code></pre>
<ol start="2">
<li>配置 <code>package.json</code></li>
</ol>
<pre><code class="jsx">{
  // ... 省略 ...
  "lint-staged": {
    "*.{js,ts,vue}": [
      "eslint --fix"
    ]
  }
}

{
  "scripts": {
    // ... 省略 ...
    "lint-staged": "lint-staged"
  }
}
</code></pre>
<ol start="3">
<li>修改 .husky/pre-commit 文件</li>
</ol>
<pre><code class="jsx">pnpm lint-staged
</code></pre>
<h2 id="调整项目目录"><a href="#调整项目目录" class="headerlink" title="调整项目目录"></a>调整项目目录</h2><p>默认生成的目录结构不满足我们的开发需求，所以这里需要做一些自定义改动。主要是两个工作：</p>
<ul>
<li>删除初始化的默认文件</li>
<li>修改剩余代码内容</li>
<li>新增调整我们需要的目录结构</li>
<li>拷贝初始化资源文件，安装预处理器插件</li>
</ul>
<ol>
<li><p>删除文件</p>
</li>
<li><p>修改内容</p>
</li>
</ol>
<p><code>src/router/index.js</code></p>
<pre><code class="jsx">import { createRouter, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: []
})

export default router
</code></pre>
<p><code>src/App.vue</code></p>
<pre><code class="jsx">&lt;script setup&gt;&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre>
<p><code>src/main.js</code></p>
<pre><code class="jsx">import { createApp } from 'vue'
import { createPinia } from 'pinia'

import App from './App.vue'
import router from './router'

const app = createApp(App)

app.use(createPinia())
app.use(router)
app.mount('#app')
</code></pre>
<ol start="3">
<li><p>新增需要目录 api  utils</p>
</li>
<li><p>将项目需要的全局样式 和 图片文件，复制到 assets 文件夹中,  并将全局样式在main.js中引入</p>
</li>
</ol>
<pre><code class="jsx">import '@/assets/main.scss'
</code></pre>
<ul>
<li>安装 sass 依赖</li>
</ul>
<pre><code class="jsx">pnpm add sass -D
</code></pre>
<h2 id="VueRouter4-路由代码解析"><a href="#VueRouter4-路由代码解析" class="headerlink" title="VueRouter4 路由代码解析"></a>VueRouter4 路由代码解析</h2><p>基础代码解析</p>
<pre><code class="jsx">import { createRouter, createWebHistory } from 'vue-router'

// createRouter 创建路由实例，===&gt; new VueRouter()
// 1. history模式: createWebHistory()   http://xxx/user
// 2. hash模式: createWebHashHistory()  http://xxx/#/user

// vite 的配置 import.meta.env.BASE_URL 是路由的基准地址，默认是 ’/‘
// https://vitejs.dev/guide/build.html#public-base-path

// 如果将来你部署的域名路径是：http://xxx/my-path/user
// vite.config.ts  添加配置  base: my-path，路由这就会加上 my-path 前缀了

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: []
})

export default router
</code></pre>
<p>import.meta.env.BASE_URL 是Vite 环境变量：<a target="_blank" rel="noopener" href="https://cn.vitejs.dev/guide/env-and-mode.html">https://cn.vitejs.dev/guide/env-and-mode.html</a></p>
<h2 id="引入-element-ui-组件库"><a href="#引入-element-ui-组件库" class="headerlink" title="引入 element-ui 组件库"></a>引入 element-ui 组件库</h2><p><strong>官方文档：</strong> <a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/">https://element-plus.org/zh-CN/</a></p>
<ul>
<li>安装</li>
</ul>
<pre><code class="jsx">$ pnpm add element-plus
</code></pre>
<p><strong>自动按需：</strong></p>
<ol>
<li>安装插件</li>
</ol>
<pre><code class="jsx">pnpm add -D unplugin-vue-components unplugin-auto-import
</code></pre>
<ol start="2">
<li>然后把下列代码插入到你的 <code>Vite</code> 或 <code>Webpack</code> 的配置文件中</li>
</ol>
<pre><code class="jsx">...
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    ...
    AutoImport({
      resolvers: [ElementPlusResolver()]
    }),
    Components({
      resolvers: [ElementPlusResolver()]
    })
  ]
})
</code></pre>
<ol start="3">
<li>直接使用</li>
</ol>
<pre><code class="jsx">&lt;template&gt;
  &lt;div&gt;
    &lt;el-button type="primary"&gt;Primary&lt;/el-button&gt;
    &lt;el-button type="success"&gt;Success&lt;/el-button&gt;
    &lt;el-button type="info"&gt;Info&lt;/el-button&gt;
    &lt;el-button type="warning"&gt;Warning&lt;/el-button&gt;
    &lt;el-button type="danger"&gt;Danger&lt;/el-button&gt;
    ...
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p><strong>彩蛋：</strong>默认 components 下的文件也会被自动注册~</p>
<h2 id="Pinia-构建用户仓库-和-持久化"><a href="#Pinia-构建用户仓库-和-持久化" class="headerlink" title="Pinia - 构建用户仓库 和 持久化"></a>Pinia - 构建用户仓库 和 持久化</h2><p>官方文档：<a target="_blank" rel="noopener" href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/">https://prazdevs.github.io/pinia-plugin-persistedstate/zh/</a></p>
<ol>
<li>安装插件 pinia-plugin-persistedstate</li>
</ol>
<pre><code class="jsx">pnpm add pinia-plugin-persistedstate -D
</code></pre>
<ol start="2">
<li>使用 main.js</li>
</ol>
<pre><code class="jsx">import persist from 'pinia-plugin-persistedstate'
...
app.use(createPinia().use(persist))
</code></pre>
<ol start="3">
<li>配置 stores/user.js</li>
</ol>
<pre><code class="jsx">import { defineStore } from 'pinia'
import { ref } from 'vue'

// 用户模块
export const useUserStore = defineStore(
  'big-user',
  () =&gt; {
    const token = ref('') // 定义 token
    const setToken = (t) =&gt; (token.value = t) // 设置 token

    return { token, setToken }
  },
  {
    persist: true // 持久化
  }
)
</code></pre>
<h2 id="Pinia-配置仓库统一管理"><a href="#Pinia-配置仓库统一管理" class="headerlink" title="Pinia - 配置仓库统一管理"></a>Pinia - 配置仓库统一管理</h2><p>pinia 独立维护</p>
<p>- 现在：初始化代码在 main.js 中，仓库代码在 stores 中，代码分散职能不单一</p>
<p>- 优化：由 stores 统一维护，在 stores/index.js 中完成 pinia 初始化，交付 main.js 使用</p>
<p>仓库 统一导出</p>
<p>- 现在：使用一个仓库 import { useUserStore } from <code>./stores/user.js</code> 不同仓库路径不一致</p>
<p>- 优化：由 stores/index.js 统一导出，导入路径统一 <code>./stores</code>，而且仓库维护在 stores/modules 中</p>
<h2 id="数据交互-请求工具设计"><a href="#数据交互-请求工具设计" class="headerlink" title="数据交互 - 请求工具设计"></a>数据交互 - 请求工具设计</h2><h3 id="1-创建-axios-实例"><a href="#1-创建-axios-实例" class="headerlink" title="1. 创建 axios 实例"></a>1. 创建 axios 实例</h3><p>们会使用 axios 来请求后端接口, 一般都会对 axios 进行一些配置 (比如: 配置基础地址等)</p>
<p>一般项目开发中, 都会对 axios 进行基本的二次封装, 单独封装到一个模块中, 便于使用</p>
<ol>
<li>安装 axios</li>
</ol>
<pre><code>pnpm add axios
</code></pre>
<ol start="2">
<li><p>新建 <code>utils/request.js</code> 封装 axios 模块</p>
<p>利用 axios.create 创建一个自定义的 axios 来使用</p>
<p><a target="_blank" rel="noopener" href="http://www.axios-js.com/zh-cn/docs/#axios-create-config">http://www.axios-js.com/zh-cn/docs/#axios-create-config</a></p>
</li>
</ol>
<pre><code class="js">import axios from 'axios'

const baseURL = 'http://big-event-vue-api-t.itheima.net'

const instance = axios.create({
  // TODO 1. 基础地址，超时时间
})

instance.interceptors.request.use(
  (config) =&gt; {
    // TODO 2. 携带token
    return config
  },
  (err) =&gt; Promise.reject(err)
)

instance.interceptors.response.use(
  (res) =&gt; {
    // TODO 3. 处理业务失败
    // TODO 4. 摘取核心响应数据
    return res
  },
  (err) =&gt; {
    // TODO 5. 处理401错误
    return Promise.reject(err)
  }
)

export default instance
</code></pre>
<h3 id="2-完成-axios-基本配置"><a href="#2-完成-axios-基本配置" class="headerlink" title="2. 完成 axios 基本配置"></a>2. 完成 axios 基本配置</h3><pre><code class="jsx">import { useUserStore } from '@/stores/user'
import axios from 'axios'
import router from '@/router'
import { ElMessage } from 'element-plus'

const baseURL = 'http://big-event-vue-api-t.itheima.net'

const instance = axios.create({
  baseURL,
  timeout: 100000
})

instance.interceptors.request.use(
  (config) =&gt; {
    const userStore = useUserStore()
    if (userStore.token) {
      config.headers.Authorization = userStore.token
    }
    return config
  },
  (err) =&gt; Promise.reject(err)
)

instance.interceptors.response.use(
  (res) =&gt; {
    if (res.data.code === 0) {
      return res
    }
    ElMessage({ message: res.data.message || '服务异常', type: 'error' })
    return Promise.reject(res.data)
  },
  (err) =&gt; {
    ElMessage({ message: err.response.data.message || '服务异常', type: 'error' })
    console.log(err)
    if (err.response?.status === 401) {
      router.push('/login')
    }
    return Promise.reject(err)
  }
)

export default instance
export { baseURL }
</code></pre>
<h2 id="首页整体路由设计"><a href="#首页整体路由设计" class="headerlink" title="首页整体路由设计"></a>首页整体路由设计</h2><p><strong>实现目标:</strong></p>
<ul>
<li>完成整体路由规划【搞清楚要做几个页面，它们分别在哪个路由下面，怎么跳转的…..】</li>
<li>通过观察,  点击左侧导航,  右侧区域在切换,  那右侧区域内容一直在变,  那这个地方就是一个路由的出口</li>
<li>我们需要搭建嵌套路由</li>
</ul>
<p>目标：</p>
<ul>
<li>把项目中所有用到的组件及路由表, 约定下来</li>
</ul>
<p><strong>约定路由规则</strong></p>
<table>
<thead>
<tr>
<th>path</th>
<th>文件</th>
<th>功能</th>
<th>组件名</th>
<th>路由级别</th>
</tr>
</thead>
<tbody><tr>
<td>/login</td>
<td>views/login/LoginPage.vue</td>
<td>登录&amp;注册</td>
<td>LoginPage</td>
<td>一级路由</td>
</tr>
<tr>
<td>/</td>
<td>views/layout/LayoutContainer.vue</td>
<td>布局架子</td>
<td>LayoutContainer</td>
<td>一级路由</td>
</tr>
<tr>
<td>├─ /article/manage</td>
<td>views/article/ArticleManage.vue</td>
<td>文章管理</td>
<td>ArticleManage</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ /article/channel</td>
<td>views/article/ArticleChannel.vue</td>
<td>频道管理</td>
<td>ArticleChannel</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ /user/profile</td>
<td>views/user/UserProfile.vue</td>
<td>个人详情</td>
<td>UserProfile</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ /user/avatar</td>
<td>views/user/UserAvatar.vue</td>
<td>更换头像</td>
<td>UserAvatar</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ /user/password</td>
<td>views/user/UserPassword.vue</td>
<td>重置密码</td>
<td>UserPassword</td>
<td>二级路由</td>
</tr>
</tbody></table>
<p>明确了路由规则，可以全部配完，也可以边写边配。</p>
<h1 id="登录注册页面-element-plus-表单-表单校验"><a href="#登录注册页面-element-plus-表单-表单校验" class="headerlink" title="登录注册页面 [element-plus 表单 &amp; 表单校验]"></a>登录注册页面 [element-plus 表单 &amp; 表单校验]</h1><h2 id="注册登录-静态结构-基本切换"><a href="#注册登录-静态结构-基本切换" class="headerlink" title="注册登录 静态结构 &amp; 基本切换"></a>注册登录 静态结构 &amp; 基本切换</h2><ol>
<li>安装 element-plus 图标库</li>
</ol>
<pre><code class="jsx">pnpm i @element-plus/icons-vue
</code></pre>
<ol start="2">
<li>静态结构准备</li>
</ol>
<pre><code class="jsx">&lt;script setup&gt;
import { User, Lock } from '@element-plus/icons-vue'
import { ref } from 'vue'
const isRegister = ref(true)
&lt;/script&gt;

&lt;template&gt;
  &lt;el-row class="login-page"&gt;
    &lt;el-col :span="12" class="bg"&gt;&lt;/el-col&gt;
    &lt;el-col :span="6" :offset="3" class="form"&gt;
      &lt;el-form ref="form" size="large" autocomplete="off" v-if="isRegister"&gt;
        &lt;el-form-item&gt;
          &lt;h1&gt;注册&lt;/h1&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-input :prefix-icon="User" placeholder="请输入用户名"&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-input
            :prefix-icon="Lock"
            type="password"
            placeholder="请输入密码"
          &gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-input
            :prefix-icon="Lock"
            type="password"
            placeholder="请输入再次密码"
          &gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-button class="button" type="primary" auto-insert-space&gt;
            注册
          &lt;/el-button&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item class="flex"&gt;
          &lt;el-link type="info" :underline="false" @click="isRegister = false"&gt;
            ← 返回
          &lt;/el-link&gt;
        &lt;/el-form-item&gt;
      &lt;/el-form&gt;
      &lt;el-form ref="form" size="large" autocomplete="off" v-else&gt;
        &lt;el-form-item&gt;
          &lt;h1&gt;登录&lt;/h1&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-input :prefix-icon="User" placeholder="请输入用户名"&gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-input
            name="password"
            :prefix-icon="Lock"
            type="password"
            placeholder="请输入密码"
          &gt;&lt;/el-input&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item class="flex"&gt;
          &lt;div class="flex"&gt;
            &lt;el-checkbox&gt;记住我&lt;/el-checkbox&gt;
            &lt;el-link type="primary" :underline="false"&gt;忘记密码？&lt;/el-link&gt;
          &lt;/div&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
          &lt;el-button class="button" type="primary" auto-insert-space
            &gt;登录&lt;/el-button
          &gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item class="flex"&gt;
          &lt;el-link type="info" :underline="false" @click="isRegister = true"&gt;
            注册 →
          &lt;/el-link&gt;
        &lt;/el-form-item&gt;
      &lt;/el-form&gt;
    &lt;/el-col&gt;
  &lt;/el-row&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.login-page {
  height: 100vh;
  background-color: #fff;
  .bg {
    background: url('@/assets/logo2.png') no-repeat 60% center / 240px auto,
      url('@/assets/login_bg.jpg') no-repeat center / cover;
    border-radius: 0 20px 20px 0;
  }
  .form {
    display: flex;
    flex-direction: column;
    justify-content: center;
    user-select: none;
    .title {
      margin: 0 auto;
    }
    .button {
      width: 100%;
    }
    .flex {
      width: 100%;
      display: flex;
      justify-content: space-between;
    }
  }
}
&lt;/style&gt;
</code></pre>
<h2 id="注册功能"><a href="#注册功能" class="headerlink" title="注册功能"></a>注册功能</h2><h3 id="实现注册校验"><a href="#实现注册校验" class="headerlink" title="实现注册校验"></a>实现注册校验</h3><p>【需求】注册页面基本校验</p>
<ol>
<li>用户名非空，长度校验5-10位</li>
<li>密码非空，长度校验6-15位</li>
<li>再次输入密码，非空，长度校验6-15位</li>
</ol>
<p>【进阶】再次输入密码需要自定义校验规则，和密码框值一致（可选）</p>
<p>注意：</p>
<ol>
<li>model 属性绑定 form 数据对象</li>
</ol>
<pre><code class="jsx">const formModel = ref({
  username: '',
  password: '',
  repassword: ''
})

&lt;el-form :model="formModel" &gt;
</code></pre>
<ol start="2">
<li>v-model 绑定 form 数据对象的子属性</li>
</ol>
<pre><code class="jsx">&lt;el-input
  v-model="formModel.username"
  :prefix-icon="User"
  placeholder="请输入用户名"
&gt;&lt;/el-input&gt;
... 
(其他两个也要绑定)
</code></pre>
<ol start="3">
<li>rules 配置校验规则</li>
</ol>
<pre><code class="jsx">&lt;el-form :rules="rules" &gt;
    
const rules = {
  username: [
    { required: true, message: '请输入用户名', trigger: 'blur' },
    { min: 5, max: 10, message: '用户名必须是5-10位的字符', trigger: 'blur' }
  ],
  password: [
    { required: true, message: '请输入密码', trigger: 'blur' },
    {
      pattern: /^\S{6,15}$/,
      message: '密码必须是6-15位的非空字符',
      trigger: 'blur'
    }
  ],
  repassword: [
    { required: true, message: '请再次输入密码', trigger: 'blur' },
    {
      pattern: /^\S{6,15}$/,
      message: '密码必须是6-15的非空字符',
      trigger: 'blur'
    },
    {
      validator: (rule, value, callback) =&gt; {
        if (value !== formModel.value.password) {
          callback(new Error('两次输入密码不一致!'))
        } else {
          callback()
        }
      },
      trigger: 'blur'
    }
  ]
}
</code></pre>
<ol start="4">
<li>prop 绑定校验规则</li>
</ol>
<pre><code class="jsx">&lt;el-form-item prop="username"&gt;
  &lt;el-input
    v-model="formModel.username"
    :prefix-icon="User"
    placeholder="请输入用户名"
  &gt;&lt;/el-input&gt;
&lt;/el-form-item&gt;
... 
(其他两个也要绑定prop)
</code></pre>
<h3 id="注册前的预校验"><a href="#注册前的预校验" class="headerlink" title="注册前的预校验"></a>注册前的预校验</h3><p>需求：点击注册按钮，注册之前，需要先校验</p>
<ol>
<li>通过 ref 获取到 表单组件</li>
</ol>
<pre><code class="jsx">const form = ref()

&lt;el-form ref="form"&gt;
</code></pre>
<ol start="2">
<li>注册之前进行校验</li>
</ol>
<pre><code class="jsx">&lt;el-button
  @click="register"
  class="button"
  type="primary"
  auto-insert-space
&gt;
  注册
&lt;/el-button&gt;

const register = async () =&gt; {
  await form.value.validate()
  console.log('开始注册请求')
}
</code></pre>
<h3 id="封装-api-实现注册功能"><a href="#封装-api-实现注册功能" class="headerlink" title="封装 api 实现注册功能"></a>封装 api 实现注册功能</h3><p>需求：封装注册api，进行注册，注册成功切换到登录</p>
<ol>
<li>新建 api/user.js 封装</li>
</ol>
<pre><code class="jsx">import request from '@/utils/request'

export const userRegisterService = ({ username, password, repassword }) =&gt;
  request.post('/api/reg', { username, password, repassword })
</code></pre>
<ol start="2">
<li>页面中调用</li>
</ol>
<pre><code class="jsx">const register = async () =&gt; {
  await form.value.validate()
  await userRegisterService(formModel.value)
  ElMessage.success('注册成功')
  // 切换到登录
  isRegister.value = false
}
</code></pre>
<ol start="3">
<li>eslintrc 中声明全局变量名,  解决 ElMessage 报错问题</li>
</ol>
<pre><code class="jsx">module.exports = {
  ...
  globals: {
    ElMessage: 'readonly',
    ElMessageBox: 'readonly',
    ElLoading: 'readonly'
  }
}
</code></pre>
<h2 id="登录功能"><a href="#登录功能" class="headerlink" title="登录功能"></a>登录功能</h2><h3 id="实现登录校验"><a href="#实现登录校验" class="headerlink" title="实现登录校验"></a>实现登录校验</h3><p>【需求说明】给输入框添加表单校验</p>
<ol>
<li>用户名不能为空，用户名必须是5-10位的字符，失去焦点 和 修改内容时触发校验</li>
<li>密码不能为空，密码必须是6-15位的字符，失去焦点 和 修改内容时触发校验</li>
</ol>
<p>操作步骤：</p>
<ol>
<li>model 属性绑定 form 数据对象，直接绑定之前提供好的数据对象即可</li>
</ol>
<pre><code class="jsx">&lt;el-form :model="formModel" &gt;
</code></pre>
<ol start="2">
<li>rules 配置校验规则，共用注册的规则即可</li>
</ol>
<pre><code class="jsx">&lt;el-form :rules="rules" &gt;
</code></pre>
<ol start="3">
<li>v-model 绑定 form 数据对象的子属性</li>
</ol>
<pre><code class="jsx">&lt;el-input
  v-model="formModel.username"
  :prefix-icon="User"
  placeholder="请输入用户名"
&gt;&lt;/el-input&gt;

&lt;el-input
  v-model="formModel.password"
  name="password"
  :prefix-icon="Lock"
  type="password"
  placeholder="请输入密码"
&gt;&lt;/el-input&gt;
</code></pre>
<ol start="4">
<li>prop 绑定校验规则</li>
</ol>
<pre><code class="jsx">&lt;el-form-item prop="username"&gt;
  &lt;el-input
    v-model="formModel.username"
    :prefix-icon="User"
    placeholder="请输入用户名"
  &gt;&lt;/el-input&gt;
&lt;/el-form-item&gt;
... 
</code></pre>
<ol start="5">
<li>切换的时候重置</li>
</ol>
<pre><code class="jsx">watch(isRegister, () =&gt; {
  formModel.value = {
    username: '',
    password: '',
    repassword: ''
  }
})
</code></pre>
<h3 id="登录前的预校验-登录成功"><a href="#登录前的预校验-登录成功" class="headerlink" title="登录前的预校验 &amp; 登录成功"></a>登录前的预校验 &amp; 登录成功</h3><p>【需求说明1】登录之前的预校验</p>
<ul>
<li>登录请求之前，需要对用户的输入内容，进行校验</li>
<li>校验通过才发送请求</li>
</ul>
<p>【需求说明2】<strong>登录功能</strong></p>
<ol>
<li>封装登录API，点击按钮发送登录请求</li>
<li>登录成功存储token，存入pinia 和 持久化本地storage</li>
<li>跳转到首页，给提示</li>
</ol>
<p>【测试账号】</p>
<ul>
<li><p>登录的测试账号:  shuaipeng</p>
</li>
<li><p>登录测试密码:  123456</p>
</li>
</ul>
<p>PS: 每天账号会重置，如果被重置了，可以去注册页，注册一个新号</p>
<p>实现步骤：</p>
<ol>
<li>注册事件，进行登录前的预校验 (获取到组件调用方法)</li>
</ol>
<pre><code class="jsx">&lt;el-form ref="form"&gt;
    
const login = async () =&gt; {
  await form.value.validate()
  console.log('开始登录')
}
</code></pre>
<ol start="2">
<li>封装接口 API</li>
</ol>
<pre><code class="jsx">export const userLoginService = ({ username, password }) =&gt;
  request.post('api/login', { username, password })
</code></pre>
<ol start="3">
<li>调用方法将 token 存入 pinia 并 自动持久化本地</li>
</ol>
<pre><code class="jsx">const userStore = useUserStore()
const router = useRouter()
const login = async () =&gt; {
  await form.value.validate()
  const res = await userLoginService(formModel.value)
  userStore.setToken(res.data.token)
  ElMessage.success('登录成功')
  router.push('/')
}
</code></pre>
<h1 id="首页-layout-架子-element-plus-菜单"><a href="#首页-layout-架子-element-plus-菜单" class="headerlink" title="首页 layout 架子 [element-plus 菜单]"></a>首页 layout 架子 [element-plus 菜单]</h1><h2 id="基本架子拆解"><a href="#基本架子拆解" class="headerlink" title="基本架子拆解"></a>基本架子拆解</h2><p><strong>架子组件列表：</strong></p>
<p>el-container</p>
<ul>
<li><p>el-aside 左侧</p>
<ul>
<li>el-menu 左侧边栏菜单</li>
</ul>
</li>
<li><p>el-container  右侧</p>
<ul>
<li>el-header  右侧头部<ul>
<li>el-dropdown</li>
</ul>
</li>
<li>el-main  右侧主体<ul>
<li>router-view</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="jsx">&lt;script setup&gt;
import {
  Management,
  Promotion,
  UserFilled,
  User,
  Crop,
  EditPen,
  SwitchButton,
  CaretBottom
} from '@element-plus/icons-vue'
import avatar from '@/assets/default.png'
&lt;/script&gt;

&lt;template&gt;
  &lt;el-container class="layout-container"&gt;
    &lt;el-aside width="200px"&gt;
      &lt;div class="el-aside__logo"&gt;&lt;/div&gt;
      &lt;el-menu
        active-text-color="#ffd04b"
        background-color="#232323"
        :default-active="$route.path"
        text-color="#fff"
        router
      &gt;
        &lt;el-menu-item index="/article/channel"&gt;
          &lt;el-icon&gt;&lt;Management /&gt;&lt;/el-icon&gt;
          &lt;span&gt;文章分类&lt;/span&gt;
        &lt;/el-menu-item&gt;
        &lt;el-menu-item index="/article/manage"&gt;
          &lt;el-icon&gt;&lt;Promotion /&gt;&lt;/el-icon&gt;
          &lt;span&gt;文章管理&lt;/span&gt;
        &lt;/el-menu-item&gt;
        &lt;el-sub-menu index="/user"&gt;
          &lt;template #title&gt;
            &lt;el-icon&gt;&lt;UserFilled /&gt;&lt;/el-icon&gt;
            &lt;span&gt;个人中心&lt;/span&gt;
          &lt;/template&gt;
          &lt;el-menu-item index="/user/profile"&gt;
            &lt;el-icon&gt;&lt;User /&gt;&lt;/el-icon&gt;
            &lt;span&gt;基本资料&lt;/span&gt;
          &lt;/el-menu-item&gt;
          &lt;el-menu-item index="/user/avatar"&gt;
            &lt;el-icon&gt;&lt;Crop /&gt;&lt;/el-icon&gt;
            &lt;span&gt;更换头像&lt;/span&gt;
          &lt;/el-menu-item&gt;
          &lt;el-menu-item index="/user/password"&gt;
            &lt;el-icon&gt;&lt;EditPen /&gt;&lt;/el-icon&gt;
            &lt;span&gt;重置密码&lt;/span&gt;
          &lt;/el-menu-item&gt;
        &lt;/el-sub-menu&gt;
      &lt;/el-menu&gt;
    &lt;/el-aside&gt;
    &lt;el-container&gt;
      &lt;el-header&gt;
        &lt;div&gt;黑马程序员：&lt;strong&gt;小帅鹏&lt;/strong&gt;&lt;/div&gt;
        &lt;el-dropdown placement="bottom-end"&gt;
          &lt;span class="el-dropdown__box"&gt;
            &lt;el-avatar :src="avatar" /&gt;
            &lt;el-icon&gt;&lt;CaretBottom /&gt;&lt;/el-icon&gt;
          &lt;/span&gt;
          &lt;template #dropdown&gt;
            &lt;el-dropdown-menu&gt;
              &lt;el-dropdown-item command="profile" :icon="User"
                &gt;基本资料&lt;/el-dropdown-item
              &gt;
              &lt;el-dropdown-item command="avatar" :icon="Crop"
                &gt;更换头像&lt;/el-dropdown-item
              &gt;
              &lt;el-dropdown-item command="password" :icon="EditPen"
                &gt;重置密码&lt;/el-dropdown-item
              &gt;
              &lt;el-dropdown-item command="logout" :icon="SwitchButton"
                &gt;退出登录&lt;/el-dropdown-item
              &gt;
            &lt;/el-dropdown-menu&gt;
          &lt;/template&gt;
        &lt;/el-dropdown&gt;
      &lt;/el-header&gt;
      &lt;el-main&gt;
        &lt;router-view&gt;&lt;/router-view&gt;
      &lt;/el-main&gt;
      &lt;el-footer&gt;大事件 ©2023 Created by 黑马程序员&lt;/el-footer&gt;
    &lt;/el-container&gt;
  &lt;/el-container&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.layout-container {
  height: 100vh;
  .el-aside {
    background-color: #232323;
    &amp;__logo {
      height: 120px;
      background: url('@/assets/logo.png') no-repeat center / 120px auto;
    }
    .el-menu {
      border-right: none;
    }
  }
  .el-header {
    background-color: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    .el-dropdown__box {
      display: flex;
      align-items: center;
      .el-icon {
        color: #999;
        margin-left: 10px;
      }

      &amp;:active,
      &amp;:focus {
        outline: none;
      }
    }
  }
  .el-footer {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: #666;
  }
}
&lt;/style&gt;
</code></pre>
<h2 id="登录访问拦截"><a href="#登录访问拦截" class="headerlink" title="登录访问拦截"></a>登录访问拦截</h2><p>需求：只有登录页，可以未授权的时候访问，其他所有页面，都需要先登录再访问</p>
<pre><code class="jsx">// 登录访问拦截
router.beforeEach((to) =&gt; {
  const userStore = useUserStore()
  if (!userStore.token &amp;&amp; to.path !== '/login') return '/login'
})
</code></pre>
<h2 id="用户基本信息获取-渲染"><a href="#用户基本信息获取-渲染" class="headerlink" title="用户基本信息获取&amp;渲染"></a>用户基本信息获取&amp;渲染</h2><ol>
<li><code>api/user.js</code>封装接口</li>
</ol>
<pre><code class="jsx">export const userGetInfoService = () =&gt; request.get('/my/userinfo')
</code></pre>
<ol start="2">
<li>stores/modules/user.js 定义数据</li>
</ol>
<pre><code class="jsx">const user = ref({})
const getUser = async () =&gt; {
  const res = await userGetInfoService() // 请求获取数据
  user.value = res.data.data
}
</code></pre>
<ol start="3">
<li><code>layout/LayoutContainer</code>页面中调用</li>
</ol>
<pre><code class="js">import { useUserStore } from '@/stores'
const userStore = useUserStore()
onMounted(() =&gt; {
  userStore.getUser()
})
</code></pre>
<ol start="4">
<li>动态渲染</li>
</ol>
<pre><code class="jsx">&lt;div&gt;
  黑马程序员：&lt;strong&gt;{{ userStore.user.nickname || userStore.user.username }}&lt;/strong&gt;
&lt;/div&gt;

&lt;el-avatar :src="userStore.user.user_pic || avatar" /&gt;
</code></pre>
<h2 id="退出功能-element-plus-确认框"><a href="#退出功能-element-plus-确认框" class="headerlink" title="退出功能 [element-plus 确认框]"></a>退出功能 [element-plus 确认框]</h2><ol>
<li>注册点击事件</li>
</ol>
<pre><code class="jsx">&lt;el-dropdown placement="bottom-end" @command="onCommand"&gt;

&lt;el-dropdown-menu&gt;
  &lt;el-dropdown-item command="profile" :icon="User"&gt;基本资料&lt;/el-dropdown-item&gt;
  &lt;el-dropdown-item command="avatar" :icon="Crop"&gt;更换头像&lt;/el-dropdown-item&gt;
  &lt;el-dropdown-item command="password" :icon="EditPen"&gt;重置密码&lt;/el-dropdown-item&gt;
  &lt;el-dropdown-item command="logout" :icon="SwitchButton"&gt;退出登录&lt;/el-dropdown-item&gt;
&lt;/el-dropdown-menu&gt;
</code></pre>
<ol start="2">
<li>添加退出功能</li>
</ol>
<pre><code class="jsx">const onCommand = async (command) =&gt; {
  if (command === 'logout') {
    await ElMessageBox.confirm('你确认退出大事件吗？', '温馨提示', {
      type: 'warning',
      confirmButtonText: '确认',
      cancelButtonText: '取消'
    })
    userStore.removeToken()
    userStore.setUser({})
    router.push(`/login`)
  } else {
    router.push(`/user/${command}`)
  }
}
</code></pre>
<ol start="3">
<li>pinia  user.js 模块 提供 setUser 方法</li>
</ol>
<pre><code class="jsx">const setUser = (obj) =&gt; (user.value = obj)
</code></pre>
<h1 id="文章分类页面-element-plus-表格"><a href="#文章分类页面-element-plus-表格" class="headerlink" title="文章分类页面 - [element-plus 表格]"></a>文章分类页面 - [element-plus 表格]</h1><h2 id="基本架子-PageContainer"><a href="#基本架子-PageContainer" class="headerlink" title="基本架子 - PageContainer"></a>基本架子 - PageContainer</h2><ol>
<li>基本结构样式，用到了 el-card 组件</li>
</ol>
<pre><code class="jsx">&lt;template&gt;
  &lt;el-card class="page-container"&gt;
    &lt;template #header&gt;
      &lt;div class="header"&gt;
        &lt;span&gt;文章分类&lt;/span&gt;
        &lt;div class="extra"&gt;
          &lt;el-button type="primary"&gt;添加分类&lt;/el-button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/template&gt;
     ...
  &lt;/el-card&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.page-container {
  min-height: 100%;
  box-sizing: border-box;
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
}
&lt;/style&gt;
</code></pre>
<ol start="2">
<li>考虑到多个页面复用，封装成组件<ul>
<li>props 定制标题</li>
<li>默认插槽 default 定制内容主体</li>
<li>具名插槽 extra  定制头部右侧额外的按钮</li>
</ul>
</li>
</ol>
<pre><code class="jsx">&lt;script setup&gt;
defineProps({
  title: {
    required: true,
    type: String
  }
})
&lt;/script&gt;

&lt;template&gt;
  &lt;el-card class="page-container"&gt;
    &lt;template #header&gt;
      &lt;div class="header"&gt;
        &lt;span&gt;{{ title }}&lt;/span&gt;
        &lt;div class="extra"&gt;
          &lt;slot name="extra"&gt;&lt;/slot&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/template&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/el-card&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.page-container {
  min-height: 100%;
  box-sizing: border-box;
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
}
&lt;/style&gt;
</code></pre>
<ol start="3">
<li>页面中直接使用测试 ( unplugin-vue-components 会自动注册)</li>
</ol>
<ul>
<li>文章分类测试：</li>
</ul>
<pre><code class="jsx">&lt;template&gt;
  &lt;page-container title="文章分类"&gt;
    &lt;template #extra&gt;
      &lt;el-button type="primary"&gt; 添加分类 &lt;/el-button&gt;
    &lt;/template&gt;

    主体部分
  &lt;/page-container&gt;
&lt;/template&gt;
</code></pre>
<ul>
<li>文章管理测试：</li>
</ul>
<pre><code class="jsx">&lt;template&gt;
  &lt;page-container title="文章管理"&gt;
    &lt;template #extra&gt;
      &lt;el-button type="primary"&gt;发布文章&lt;/el-button&gt;
    &lt;/template&gt;

    主体部分
  &lt;/page-container&gt;
&lt;/template&gt;
</code></pre>
<h2 id="文章分类渲染"><a href="#文章分类渲染" class="headerlink" title="文章分类渲染"></a>文章分类渲染</h2><h3 id="封装API-请求获取表格数据"><a href="#封装API-请求获取表格数据" class="headerlink" title="封装API - 请求获取表格数据"></a>封装API - 请求获取表格数据</h3><ol>
<li>新建 <code>api/article.js</code> 封装获取频道列表的接口</li>
</ol>
<pre><code class="jsx">import request from '@/utils/request'
export const artGetChannelsService = () =&gt; request.get('/my/cate/list')
</code></pre>
<ol start="2">
<li>页面中调用接口，获取数据存储</li>
</ol>
<pre><code class="jsx">const channelList = ref([])

const getChannelList = async () =&gt; {
  const res = await artGetChannelsService()
  channelList.value = res.data.data
}
</code></pre>
<h3 id="el-table-表格动态渲染"><a href="#el-table-表格动态渲染" class="headerlink" title="el-table 表格动态渲染"></a>el-table 表格动态渲染</h3><pre><code class="jsx">&lt;el-table :data="channelList" style="width: 100%"&gt;
  &lt;el-table-column label="序号" width="100" type="index"&gt; &lt;/el-table-column&gt;
  &lt;el-table-column label="分类名称" prop="cate_name"&gt;&lt;/el-table-column&gt;
  &lt;el-table-column label="分类别名" prop="cate_alias"&gt;&lt;/el-table-column&gt;
  &lt;el-table-column label="操作" width="100"&gt;
    &lt;template #default="{ row }"&gt;
      &lt;el-button
        :icon="Edit"
        circle
        plain
        type="primary"
        @click="onEditChannel(row)"
      &gt;&lt;/el-button&gt;
      &lt;el-button
        :icon="Delete"
        circle
        plain
        type="danger"
        @click="onDelChannel(row)"
      &gt;&lt;/el-button&gt;
    &lt;/template&gt;
  &lt;/el-table-column&gt;
  &lt;template #empty&gt;
    &lt;el-empty description="没有数据" /&gt;
  &lt;/template&gt;
&lt;/el-table&gt;


const onEditChannel = (row) =&gt; {
  console.log(row)
}
const onDelChannel = (row) =&gt; {
  console.log(row)
}
</code></pre>
<h3 id="el-table-表格-loading-效果"><a href="#el-table-表格-loading-效果" class="headerlink" title="el-table 表格 loading 效果"></a>el-table 表格 loading 效果</h3><ol>
<li>定义变量，v-loading绑定</li>
</ol>
<pre><code class="jsx">const loading = ref(false)

&lt;el-table v-loading="loading"&gt;
</code></pre>
<ol start="2">
<li>发送请求前开启，请求结束关闭</li>
</ol>
<pre><code class="jsx">const getChannelList = async () =&gt; {
  loading.value = true
  const res = await artGetChannelsService()
  channelList.value = res.data.data
  loading.value = false
}
</code></pre>
<h2 id="文章分类添加编辑-element-plus-弹层"><a href="#文章分类添加编辑-element-plus-弹层" class="headerlink" title="文章分类添加编辑 [element-plus 弹层]"></a>文章分类添加编辑 [element-plus 弹层]</h2><h3 id="点击显示弹层"><a href="#点击显示弹层" class="headerlink" title="点击显示弹层"></a>点击显示弹层</h3><ol>
<li>准备弹层</li>
</ol>
<pre><code class="jsx">const dialogVisible = ref(false)

&lt;el-dialog v-model="dialogVisible" title="添加弹层" width="30%"&gt;
  &lt;div&gt;我是内容部分&lt;/div&gt;
  &lt;template #footer&gt;
    &lt;span class="dialog-footer"&gt;
      &lt;el-button @click="dialogVisible = false"&gt;取消&lt;/el-button&gt;
      &lt;el-button type="primary"&gt; 确认 &lt;/el-button&gt;
    &lt;/span&gt;
  &lt;/template&gt;
&lt;/el-dialog&gt;
</code></pre>
<ol start="2">
<li>点击事件</li>
</ol>
<pre><code class="jsx">&lt;template #extra&gt;&lt;el-button type="primary" @click="onAddChannel"&gt;添加分类&lt;/el-button&gt;&lt;/template&gt;

const onAddChannel = () =&gt; {
  dialogVisible.value = true
}
</code></pre>
<h3 id="封装弹层组件-ChannelEdit"><a href="#封装弹层组件-ChannelEdit" class="headerlink" title="封装弹层组件 ChannelEdit"></a>封装弹层组件 ChannelEdit</h3><p>添加 和 编辑，可以共用一个弹层，所以可以将弹层封装成一个组件</p>
<p>组件对外暴露一个方法 open,  基于 open 的参数，初始化表单数据，并判断区分是添加 还是 编辑</p>
<ol>
<li>open({ })                   =&gt;  添加操作，添加表单初始化无数据</li>
<li>open({ id: xx,  …  })  =&gt;  编辑操作，编辑表单初始化需回显</li>
</ol>
<p>具体实现：</p>
<ol>
<li>封装组件 <code>article/components/ChannelEdit.vue</code></li>
</ol>
<pre><code class="jsx">&lt;script setup&gt;
import { ref } from 'vue'
const dialogVisible = ref(false)

const open = async (row) =&gt; {
  dialogVisible.value = true
  console.log(row)
}

defineExpose({
  open
})
&lt;/script&gt;

&lt;template&gt;
  &lt;el-dialog v-model="dialogVisible" title="添加弹层" width="30%"&gt;
    &lt;div&gt;我是内容部分&lt;/div&gt;
    &lt;template #footer&gt;
      &lt;span class="dialog-footer"&gt;
        &lt;el-button @click="dialogVisible = false"&gt;取消&lt;/el-button&gt;
        &lt;el-button type="primary"&gt; 确认 &lt;/el-button&gt;
      &lt;/span&gt;
    &lt;/template&gt;
  &lt;/el-dialog&gt;
&lt;/template&gt;
</code></pre>
<ol start="2">
<li>通过 ref 绑定</li>
</ol>
<pre><code class="jsx">const dialog = ref()

&lt;!-- 弹窗 --&gt;
&lt;channel-edit ref="dialog"&gt;&lt;/channel-edit&gt;
</code></pre>
<ol start="3">
<li>点击调用方法显示弹窗</li>
</ol>
<pre><code class="jsx">const onAddChannel = () =&gt; {
  dialog.value.open({})
}
const onEditChannel = (row) =&gt; {
  dialog.value.open(row)
}
</code></pre>
<h3 id="准备弹层表单"><a href="#准备弹层表单" class="headerlink" title="准备弹层表单"></a>准备弹层表单</h3><ol>
<li>准备数据 和 校验规则</li>
</ol>
<pre><code class="jsx">const formModel = ref({
  cate_name: '',
  cate_alias: ''
})
const rules = {
  cate_name: [
    { required: true, message: '请输入分类名称', trigger: 'blur' },
    {
      pattern: /^\S{1,10}$/,
      message: '分类名必须是1-10位的非空字符',
      trigger: 'blur'
    }
  ],
  cate_alias: [
    { required: true, message: '请输入分类别名', trigger: 'blur' },
    {
      pattern: /^[a-zA-Z0-9]{1,15}$/,
      message: '分类别名必须是1-15位的字母数字',
      trigger: 'blur'
    }
  ]
}
</code></pre>
<ol start="2">
<li>准备表单</li>
</ol>
<pre><code class="jsx">&lt;el-form
  :model="formModel"
  :rules="rules"
  label-width="100px"
  style="padding-right: 30px"
&gt;
  &lt;el-form-item label="分类名称" prop="cate_name"&gt;
    &lt;el-input
      v-model="formModel.cate_name"
      minlength="1"
      maxlength="10"
    &gt;&lt;/el-input&gt;
  &lt;/el-form-item&gt;
  &lt;el-form-item label="分类别名" prop="cate_alias"&gt;
    &lt;el-input
      v-model="formModel.cate_alias"
      minlength="1"
      maxlength="15"
    &gt;&lt;/el-input&gt;
  &lt;/el-form-item&gt;
&lt;/el-form&gt;
</code></pre>
<ol start="3">
<li>编辑需要回显，表单数据需要初始化</li>
</ol>
<pre><code class="jsx">const open = async (row) =&gt; {
  dialogVisible.value = true
  formModel.value = { ...row }
}
</code></pre>
<ol start="4">
<li>基于传过来的表单数据，进行标题控制，有 id 的是编辑</li>
</ol>
<pre><code class="jsx">:title="formModel.id ? '编辑分类' : '添加分类'"
</code></pre>
<h3 id="确认提交"><a href="#确认提交" class="headerlink" title="确认提交"></a>确认提交</h3><ol>
<li><code>api/article.js  </code>  封装请求 API</li>
</ol>
<pre><code class="jsx">// 添加文章分类
export const artAddChannelService = (data) =&gt; request.post('/my/cate/add', data)
// 编辑文章分类
export const artEditChannelService = (data) =&gt;
  request.put('/my/cate/info', data)
</code></pre>
<ol start="2">
<li>页面中校验，判断，提交请求</li>
</ol>
<pre><code class="jsx">&lt;el-form ref="formRef"&gt;
</code></pre>
<pre><code class="jsx">const formRef = ref()
const onSubmit = async () =&gt; {
  await formRef.value.validate()
  formModel.value.id
    ? await artEditChannelService(formModel.value)
    : await artAddChannelService(formModel.value)
  ElMessage({
    type: 'success',
    message: formModel.value.id ? '编辑成功' : '添加成功'
  })
  dialogVisible.value = false
}
</code></pre>
<ol start="3">
<li>通知父组件进行回显</li>
</ol>
<pre><code class="jsx">const emit = defineEmits(['success'])

const onSubmit = async () =&gt; {
  ...
  emit('success')
}
</code></pre>
<ol start="4">
<li>父组件监听 success 事件，进行调用回显</li>
</ol>
<pre><code class="jsx">&lt;channel-edit ref="dialog" @success="onSuccess"&gt;&lt;/channel-edit&gt;

const onSuccess = () =&gt; {
  getChannelList()
}
</code></pre>
<h2 id="文章分类删除"><a href="#文章分类删除" class="headerlink" title="文章分类删除"></a>文章分类删除</h2><ol>
<li><code>api/article.js</code>封装接口 api</li>
</ol>
<pre><code class="jsx">// 删除文章分类
export const artDelChannelService = (id) =&gt;
  request.delete('/my/cate/del', {
    params: { id }
  })
</code></pre>
<ol start="2">
<li>页面中添加确认框，调用接口进行提示</li>
</ol>
<pre><code class="jsx">const onDelChannel = async (row) =&gt; {
  await ElMessageBox.confirm('你确认删除该分类信息吗？', '温馨提示', {
    type: 'warning',
    confirmButtonText: '确认',
    cancelButtonText: '取消'
  })
  await artDelChannelService(row.id)
  ElMessage({ type: 'success', message: '删除成功' })
  getChannelList()
}
</code></pre>
<h1 id="文章管理页面-element-plus-强化"><a href="#文章管理页面-element-plus-强化" class="headerlink" title="文章管理页面 - [element-plus 强化]"></a>文章管理页面 - [element-plus 强化]</h1><h2 id="文章列表渲染"><a href="#文章列表渲染" class="headerlink" title="文章列表渲染"></a>文章列表渲染</h2><h3 id="基本架子搭建"><a href="#基本架子搭建" class="headerlink" title="基本架子搭建"></a>基本架子搭建</h3><ol>
<li>搜索表单</li>
</ol>
<pre><code class="jsx">&lt;el-form inline&gt;
  &lt;el-form-item label="文章分类："&gt;
    &lt;el-select&gt;
      &lt;el-option label="新闻" value="111"&gt;&lt;/el-option&gt;
      &lt;el-option label="体育" value="222"&gt;&lt;/el-option&gt;
    &lt;/el-select&gt;
  &lt;/el-form-item&gt;
  &lt;el-form-item label="发布状态："&gt;
    &lt;el-select&gt;
      &lt;el-option label="已发布" value="已发布"&gt;&lt;/el-option&gt;
      &lt;el-option label="草稿" value="草稿"&gt;&lt;/el-option&gt;
    &lt;/el-select&gt;
  &lt;/el-form-item&gt;
  &lt;el-form-item&gt;
    &lt;el-button type="primary"&gt;搜索&lt;/el-button&gt;
    &lt;el-button&gt;重置&lt;/el-button&gt;
  &lt;/el-form-item&gt;
&lt;/el-form&gt;
</code></pre>
<ol start="2">
<li>表格准备，模拟假数据渲染</li>
</ol>
<pre><code class="jsx">import { Delete, Edit } from '@element-plus/icons-vue'
import { ref } from 'vue'
// 假数据
const articleList = ref([
  {
    id: 5961,
    title: '新的文章啊',
    pub_date: '2022-07-10 14:53:52.604',
    state: '已发布',
    cate_name: '体育'
  },
  {
    id: 5962,
    title: '新的文章啊',
    pub_date: '2022-07-10 14:54:30.904',
    state: null,
    cate_name: '体育'
  }
])
</code></pre>
<pre><code class="jsx">&lt;el-table :data="articleList" style="width: 100%"&gt;
  &lt;el-table-column label="文章标题" width="400"&gt;
    &lt;template #default="{ row }"&gt;
      &lt;el-link type="primary" :underline="false"&gt;{{ row.title }}&lt;/el-link&gt;
    &lt;/template&gt;
  &lt;/el-table-column&gt;
  &lt;el-table-column label="分类" prop="cate_name"&gt;&lt;/el-table-column&gt;
  &lt;el-table-column label="发表时间" prop="pub_date"&gt; &lt;/el-table-column&gt;
  &lt;el-table-column label="状态" prop="state"&gt;&lt;/el-table-column&gt;
  &lt;el-table-column label="操作" width="100"&gt;
    &lt;template #default="{ row }"&gt;
      &lt;el-button
        :icon="Edit"
        circle
        plain
        type="primary"
        @click="onEditArticle(row)"
      &gt;&lt;/el-button&gt;
      &lt;el-button
        :icon="Delete"
        circle
        plain
        type="danger"
        @click="onDeleteArticle(row)"
      &gt;&lt;/el-button&gt;
    &lt;/template&gt;
  &lt;/el-table-column&gt;
  &lt;template #empty&gt;
    &lt;el-empty description="没有数据" /&gt;
  &lt;/template&gt;
&lt;/el-table&gt;


const onEditArticle = (row) =&gt; {
  console.log(row)
}
const onDeleteArticle = (row) =&gt; {
  console.log(row)
}
</code></pre>
<h3 id="中英国际化处理"><a href="#中英国际化处理" class="headerlink" title="中英国际化处理"></a>中英国际化处理</h3><p>默认是英文的，由于这里不涉及切换， 所以在 App.vue 中直接导入设置成中文即可，</p>
<pre><code class="jsx">&lt;script setup&gt;
import zh from 'element-plus/es/locale/lang/zh-cn.mjs'
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 国际化处理 --&gt;
  &lt;el-config-provider :locale="zh"&gt;
    &lt;router-view /&gt;
  &lt;/el-config-provider&gt;
&lt;/template&gt;
</code></pre>
<h3 id="文章分类选择"><a href="#文章分类选择" class="headerlink" title="文章分类选择"></a>文章分类选择</h3><p>为了便于维护，直接拆分成一个小组件 ChannelSelect.vue</p>
<ol>
<li>新建 article/components/ChannelSelect.vue</li>
</ol>
<pre><code class="jsx">&lt;template&gt;
  &lt;el-select&gt;
    &lt;el-option label="新闻" value="新闻"&gt;&lt;/el-option&gt;
    &lt;el-option label="体育" value="体育"&gt;&lt;/el-option&gt;
  &lt;/el-select&gt;
&lt;/template&gt;
</code></pre>
<ol start="2">
<li>页面中导入渲染</li>
</ol>
<pre><code class="vue">import ChannelSelect from './components/ChannelSelect.vue'

&lt;el-form-item label="文章分类："&gt;
  &lt;channel-select&gt;&lt;/channel-select&gt;
&lt;/el-form-item&gt;
</code></pre>
<ol start="3">
<li>调用接口，动态渲染下拉分类，设计成 v-model 的使用方式</li>
</ol>
<pre><code class="jsx">&lt;script setup&gt;
import { artGetChannelsService } from '@/api/article'
import { ref } from 'vue'

defineProps({
  modelValue: {
    type: [Number, String]
  }
})

const emit = defineEmits(['update:modelValue'])
const channelList = ref([])
const getChannelList = async () =&gt; {
  const res = await artGetChannelsService()
  channelList.value = res.data.data
}
getChannelList()
&lt;/script&gt;
&lt;template&gt;
  &lt;el-select
    :modelValue="modelValue"
    @update:modelValue="emit('update:modelValue', $event)"
  &gt;
    &lt;el-option
      v-for="channel in channelList"
      :key="channel.id"
      :label="channel.cate_name"
      :value="channel.id"
    &gt;&lt;/el-option&gt;
  &lt;/el-select&gt;
&lt;/template&gt;
</code></pre>
<ol start="4">
<li>父组件定义参数绑定</li>
</ol>
<pre><code class="jsx">const params = ref({
  pagenum: 1,
  pagesize: 5,
  cate_id: '',
  state: ''
})

&lt;channel-select v-model="params.cate_id"&gt;&lt;/channel-select&gt;
</code></pre>
<ol start="5">
<li>发布状态，也绑定一下，便于将来提交表单</li>
</ol>
<pre><code class="jsx">&lt;el-select v-model="params.state"&gt;
  &lt;el-option label="已发布" value="已发布"&gt;&lt;/el-option&gt;
  &lt;el-option label="草稿" value="草稿"&gt;&lt;/el-option&gt;
&lt;/el-select&gt;
</code></pre>
<h3 id="封装-API-接口，请求渲染"><a href="#封装-API-接口，请求渲染" class="headerlink" title="封装 API 接口，请求渲染"></a>封装 API 接口，请求渲染</h3><p><strong>没有数据，可以登录已完成的系统，添加几条数据</strong></p>
<ol>
<li><code>api/article.js</code>封装接口</li>
</ol>
<pre><code class="jsx">export const artGetListService = (params) =&gt;
  request.get('/my/article/list', { params })
</code></pre>
<ol start="2">
<li>页面中调用保存数据</li>
</ol>
<pre><code class="jsx">const articleList = ref([])
const total = ref(0)

const getArticleList = async () =&gt; {
  const res = await artGetListService(params.value)
  articleList.value = res.data.data
  total.value = res.data.total
}
getArticleList()
</code></pre>
<ol start="3">
<li>新建 <code>utils/format.js</code> 封装格式化日期函数</li>
</ol>
<pre><code class="jsx">import { dayjs } from 'element-plus'

export const formatTime = (time) =&gt; dayjs(time).format('YYYY年MM月DD日')
</code></pre>
<ol start="4">
<li>导入使用</li>
</ol>
<pre><code class="vue">import { formatTime } from '@/utils/format'

&lt;el-table-column label="发表时间"&gt;
  &lt;template #default="{ row }"&gt;
    {{ formatTime(row.pub_date) }}
  &lt;/template&gt;
&lt;/el-table-column&gt;
</code></pre>
<h3 id="分页渲染-element-plus-分页"><a href="#分页渲染-element-plus-分页" class="headerlink" title="分页渲染 [element-plus 分页]"></a>分页渲染 [element-plus 分页]</h3><ol>
<li>分页组件</li>
</ol>
<pre><code class="jsx">&lt;el-pagination
  v-model:current-page="params.pagenum"
  v-model:page-size="params.pagesize"
  :page-sizes="[2, 3, 4, 5, 10]"
  layout="jumper, total, sizes, prev, pager, next"
  background
  :total="total"
  @size-change="onSizeChange"
  @current-change="onCurrentChange"
  style="margin-top: 20px; justify-content: flex-end"
/&gt;
</code></pre>
<ol start="2">
<li>提供分页修改逻辑</li>
</ol>
<pre><code class="jsx">const onSizeChange = (size) =&gt; {
  params.value.pagenum = 1
  params.value.pagesize = size
  getArticleList()
}
const onCurrentChange = (page) =&gt; {
  params.value.pagenum = page
  getArticleList()
}
</code></pre>
<h3 id="添加-loading-处理"><a href="#添加-loading-处理" class="headerlink" title="添加 loading 处理"></a>添加 loading 处理</h3><ol>
<li>准备数据</li>
</ol>
<pre><code class="jsx">const loading = ref(false)
</code></pre>
<ol start="2">
<li>el-table上面绑定</li>
</ol>
<pre><code class="jsx">&lt;el-table v-loading="loading" &gt; ... &lt;/el-table&gt;
</code></pre>
<ol start="3">
<li>发送请求时添加 loading</li>
</ol>
<pre><code class="jsx">const getArticleList = async () =&gt; {
  loading.value = true
    
  ...
  
  loading.value = false
}
getArticleList()
</code></pre>
<h3 id="搜索-和-重置功能"><a href="#搜索-和-重置功能" class="headerlink" title="搜索 和 重置功能"></a>搜索 和 重置功能</h3><ol>
<li>注册事件</li>
</ol>
<pre><code class="jsx">&lt;el-form-item&gt;
  &lt;el-button @click="onSearch" type="primary"&gt;搜索&lt;/el-button&gt;
  &lt;el-button @click="onReset"&gt;重置&lt;/el-button&gt;
&lt;/el-form-item&gt;
</code></pre>
<ol start="2">
<li>绑定处理</li>
</ol>
<pre><code class="jsx">const onSearch = () =&gt; {
  params.value.pagenum = 1
  getArticleList()
}

const onReset = () =&gt; {
  params.value.pagenum = 1
  params.value.cate_id = ''
  params.value.state = ''
  getArticleList()
}
</code></pre>
<h2 id="文章发布-修改-element-plus-抽屉"><a href="#文章发布-修改-element-plus-抽屉" class="headerlink" title="文章发布&amp;修改 [element-plus - 抽屉]"></a>文章发布&amp;修改 [element-plus - 抽屉]</h2><h3 id="点击显示抽屉"><a href="#点击显示抽屉" class="headerlink" title="点击显示抽屉"></a>点击显示抽屉</h3><ol>
<li>准备数据</li>
</ol>
<pre><code class="jsx">import { ref } from 'vue'
const visibleDrawer = ref(false)
</code></pre>
<ol start="2">
<li>准备抽屉容器</li>
</ol>
<pre><code class="jsx">&lt;el-drawer
  v-model="visibleDrawer"
  title="大标题"
  direction="rtl"
  size="50%"
&gt;
  &lt;span&gt;Hi there!&lt;/span&gt;
&lt;/el-drawer&gt;
</code></pre>
<ol start="3">
<li>点击修改布尔值显示抽屉</li>
</ol>
<pre><code class="jsx">&lt;el-button type="primary" @click="onAddArticle"&gt;发布文章&lt;/el-button&gt;

const visibleDrawer = ref(false)
const onAddArticle = () =&gt; {
  visibleDrawer.value = true
}
</code></pre>
<h3 id="封装抽屉组件-ArticleEdit"><a href="#封装抽屉组件-ArticleEdit" class="headerlink" title="封装抽屉组件 ArticleEdit"></a>封装抽屉组件 ArticleEdit</h3><p>添加 和 编辑，可以共用一个抽屉，所以可以将抽屉封装成一个组件</p>
<p>组件对外暴露一个方法 open,  基于 open 的参数，初始化表单数据，并判断区分是添加 还是 编辑</p>
<ol>
<li>open({ })                   =&gt;  添加操作，添加表单初始化无数据</li>
<li>open({ id: xx,  …  })  =&gt;  编辑操作，编辑表单初始化需回显</li>
</ol>
<p>具体实现：</p>
<ol>
<li>封装组件 <code>article/components/ArticleEdit.vue</code></li>
</ol>
<pre><code class="jsx">&lt;script setup&gt;
import { ref } from 'vue'
const visibleDrawer = ref(false)

const open = (row) =&gt; {
  visibleDrawer.value = true
  console.log(row)
}

defineExpose({
  open
})
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- 抽屉 --&gt;
  &lt;el-drawer v-model="visibleDrawer" title="大标题" direction="rtl" size="50%"&gt;
    &lt;span&gt;Hi there!&lt;/span&gt;
  &lt;/el-drawer&gt;
&lt;/template&gt;
</code></pre>
<ol start="2">
<li>通过 ref 绑定</li>
</ol>
<pre><code class="jsx">const articleEditRef = ref()

&lt;!-- 弹窗 --&gt;
&lt;article-edit ref="articleEditRef"&gt;&lt;/article-edit&gt;
</code></pre>
<ol start="3">
<li>点击调用方法显示弹窗</li>
</ol>
<pre><code class="jsx">// 编辑新增逻辑
const onAddArticle = () =&gt; {
  articleEditRef.value.open({})
}
const onEditArticle = (row) =&gt; {
  articleEditRef.value.open(row)
}
</code></pre>
<h3 id="完善抽屉表单结构"><a href="#完善抽屉表单结构" class="headerlink" title="完善抽屉表单结构"></a>完善抽屉表单结构</h3><ol>
<li>准备数据</li>
</ol>
<pre><code class="jsx">const formModel = ref({
  title: '',
  cate_id: '',
  cover_img: '',
  content: '',
  state: ''
})

const open = async (row) =&gt; {
  visibleDrawer.value = true
  if (row.id) {
    console.log('编辑回显')
  } else {
    console.log('添加功能')
  }
}
</code></pre>
<ol start="2">
<li>准备 form 表单结构</li>
</ol>
<pre><code class="jsx">import ChannelSelect from './ChannelSelect.vue'

&lt;template&gt;
  &lt;el-drawer
    v-model="visibleDrawer"
    :title="formModel.id ? '编辑文章' : '添加文章'"
    direction="rtl"
    size="50%"
  &gt;
    &lt;!-- 发表文章表单 --&gt;
    &lt;el-form :model="formModel" ref="formRef" label-width="100px"&gt;
      &lt;el-form-item label="文章标题" prop="title"&gt;
        &lt;el-input v-model="formModel.title" placeholder="请输入标题"&gt;&lt;/el-input&gt;
      &lt;/el-form-item&gt;
      &lt;el-form-item label="文章分类" prop="cate_id"&gt;
        &lt;channel-select
          v-model="formModel.cate_id"
          width="100%"
        &gt;&lt;/channel-select&gt;
      &lt;/el-form-item&gt;
      &lt;el-form-item label="文章封面" prop="cover_img"&gt; 文件上传 &lt;/el-form-item&gt;
      &lt;el-form-item label="文章内容" prop="content"&gt;
        &lt;div class="editor"&gt;富文本编辑器&lt;/div&gt;
      &lt;/el-form-item&gt;
      &lt;el-form-item&gt;
        &lt;el-button type="primary"&gt;发布&lt;/el-button&gt;
        &lt;el-button type="info"&gt;草稿&lt;/el-button&gt;
      &lt;/el-form-item&gt;
    &lt;/el-form&gt;
  &lt;/el-drawer&gt;
&lt;/template&gt;
</code></pre>
<ol start="3">
<li>一打开默认重置添加的 form 表单数据</li>
</ol>
<pre><code class="jsx">const defaultForm = {
  title: '',
  cate_id: '',
  cover_img: '',
  content: '',
  state: ''
}
const formModel = ref({ ...defaultForm })

const open = async (row) =&gt; {
  visibleDrawer.value = true
  if (row.id) {
    console.log('编辑回显')
  } else {
    console.log('添加功能')
    formModel.value = { ...defaultForm }
  }
}
</code></pre>
<ol start="4">
<li>扩展 下拉菜单 width props</li>
</ol>
<pre><code class="jsx">defineProps({
  modelValue: {
    type: [Number, String]
  },
  width: {
    type: String
  }
})

&lt;el-select
 ...
 :style="{ width }"
&gt;
</code></pre>
<h3 id="上传文件-element-plus-文件预览"><a href="#上传文件-element-plus-文件预览" class="headerlink" title="上传文件 [element-plus - 文件预览]"></a>上传文件 [element-plus - 文件预览]</h3><ol>
<li>关闭自动上传，准备结构</li>
</ol>
<pre><code class="jsx">import { Plus } from '@element-plus/icons-vue'

&lt;el-upload
  class="avatar-uploader"
  :auto-upload="false"
  :show-file-list="false"
  :on-change="onUploadFile"
&gt;
  &lt;img v-if="imgUrl" :src="imgUrl" class="avatar" /&gt;
  &lt;el-icon v-else class="avatar-uploader-icon"&gt;&lt;Plus /&gt;&lt;/el-icon&gt;
&lt;/el-upload&gt;
</code></pre>
<ol start="2">
<li>准备数据 和 选择图片的处理逻辑</li>
</ol>
<pre><code class="jsx">const imgUrl = ref('')
const onUploadFile = (uploadFile) =&gt; {
  imgUrl.value = URL.createObjectURL(uploadFile.raw)
  formModel.value.cover_img = uploadFile.raw
}
</code></pre>
<ol start="3">
<li>样式美化</li>
</ol>
<pre><code class="css">.avatar-uploader {
  :deep() {
    .avatar {
      width: 178px;
      height: 178px;
      display: block;
    }
    .el-upload {
      border: 1px dashed var(--el-border-color);
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: var(--el-transition-duration-fast);
    }
    .el-upload:hover {
      border-color: var(--el-color-primary);
    }
    .el-icon.avatar-uploader-icon {
      font-size: 28px;
      color: #8c939d;
      width: 178px;
      height: 178px;
      text-align: center;
    }
  }
}
</code></pre>
<h3 id="富文本编辑器-vue-quill"><a href="#富文本编辑器-vue-quill" class="headerlink" title="富文本编辑器 [ vue-quill ]"></a>富文本编辑器 [ vue-quill ]</h3><p>官网地址：<a target="_blank" rel="noopener" href="https://vueup.github.io/vue-quill/">https://vueup.github.io/vue-quill/</a></p>
<ol>
<li>安装包</li>
</ol>
<pre><code class="js">pnpm add @vueup/vue-quill@latest
</code></pre>
<ol start="2">
<li>注册成局部组件</li>
</ol>
<pre><code class="jsx">import { QuillEditor } from '@vueup/vue-quill'
import '@vueup/vue-quill/dist/vue-quill.snow.css'
</code></pre>
<ol start="3">
<li>页面中使用绑定</li>
</ol>
<pre><code class="jsx">&lt;div class="editor"&gt;
  &lt;quill-editor
    theme="snow"
    v-model:content="formModel.content"
    contentType="html"
  &gt;
  &lt;/quill-editor&gt;
&lt;/div&gt;
</code></pre>
<ol start="4">
<li>样式美化</li>
</ol>
<pre><code class="jsx">.editor {
  width: 100%;
  :deep(.ql-editor) {
    min-height: 200px;
  }
}
</code></pre>
<h3 id="添加文章功能"><a href="#添加文章功能" class="headerlink" title="添加文章功能"></a>添加文章功能</h3><ol>
<li>封装添加接口</li>
</ol>
<pre><code class="jsx">export const artPublishService = (data) =&gt;
  request.post('/my/article/add', data)
</code></pre>
<ol start="2">
<li>注册点击事件调用</li>
</ol>
<pre><code class="jsx">&lt;el-form-item&gt;
  &lt;el-button @click="onPublish('已发布')" type="primary"&gt;发布&lt;/el-button&gt;
  &lt;el-button @click="onPublish('草稿')" type="info"&gt;草稿&lt;/el-button&gt;
&lt;/el-form-item&gt;

// 发布文章
const emit = defineEmits(['success'])
const onPublish = async (state) =&gt; {
  // 将已发布还是草稿状态，存入 state
  formModel.value.state = state

  // 转换 formData 数据
  const fd = new FormData()
  for (let key in formModel.value) {
    fd.append(key, formModel.value[key])
  }

  if (formModel.value.id) {
    console.log('编辑操作')
  } else {
    // 添加请求
    await artPublishService(fd)
    ElMessage.success('添加成功')
    visibleDrawer.value = false
    emit('success', 'add')
  }
}
</code></pre>
<ol start="3">
<li>父组件监听事件，重新渲染</li>
</ol>
<pre><code class="jsx">&lt;article-edit ref="articleEditRef" @success="onSuccess"&gt;&lt;/article-edit&gt;

// 添加修改成功
const onSuccess = (type) =&gt; {
  if (type === 'add') {
    // 如果是添加，需要跳转渲染最后一页，编辑直接渲染当前页
    const lastPage = Math.ceil((total.value + 1) / params.value.pagesize)
    params.value.pagenum = lastPage
  }
  getArticleList()
}
</code></pre>
<h3 id="添加完成后的内容重置"><a href="#添加完成后的内容重置" class="headerlink" title="添加完成后的内容重置"></a>添加完成后的内容重置</h3><pre><code class="jsx">const formRef = ref()
const editorRef = ref()
const open = async (row) =&gt; {
  visibleDrawer.value = true
  if (row.id) {
    console.log('编辑回显')
  } else {
    formModel.value = { ...defaultForm }
    imgUrl.value = ''
    editorRef.value.setHTML('')
  }
}
</code></pre>
<h3 id="编辑文章回显"><a href="#编辑文章回显" class="headerlink" title="编辑文章回显"></a>编辑文章回显</h3><p>如果是编辑操作，一打开抽屉，就需要发送请求，获取数据进行回显</p>
<ol>
<li>封装接口，根据 id 获取详情数据</li>
</ol>
<pre><code class="jsx">export const artGetDetailService = (id) =&gt;
  request.get('my/article/info', { params: { id } })
</code></pre>
<ol start="2">
<li>页面中调用渲染</li>
</ol>
<pre><code class="jsx">const open = async (row) =&gt; {
  visibleDrawer.value = true
  if (row.id) {
    console.log('编辑回显')
    const res = await artGetDetailService(row.id)
    formModel.value = res.data.data
    imgUrl.value = baseURL + formModel.value.cover_img
    // 提交给后台，需要的是 file 格式的，将网络图片，转成 file 格式
    // 网络图片转成 file 对象, 需要转换一下
    formModel.value.cover_img = await imageUrlToFile(imgUrl.value, formModel.value.cover_img)
  } else {
    console.log('添加功能')
    ...
  }
}
</code></pre>
<p>chatGPT prompt：封装一个函数，基于 axios， 网络图片地址，转 file 对象， 请注意：写中文注释</p>
<pre><code class="jsx">// 将网络图片地址转换为File对象
async function imageUrlToFile(url, fileName) {
  try {
    // 第一步：使用axios获取网络图片数据
    const response = await axios.get(url, { responseType: 'arraybuffer' });
    const imageData = response.data;

    // 第二步：将图片数据转换为Blob对象
    const blob = new Blob([imageData], { type: response.headers['content-type'] });

    // 第三步：创建一个新的File对象
    const file = new File([blob], fileName, { type: blob.type });

    return file;
  } catch (error) {
    console.error('将图片转换为File对象时发生错误:', error);
    throw error;
  }
}
</code></pre>
<h3 id="编辑文章功能"><a href="#编辑文章功能" class="headerlink" title="编辑文章功能"></a>编辑文章功能</h3><ol>
<li>封装编辑接口</li>
</ol>
<pre><code class="jsx">export const artEditService = (data) =&gt; request.put('my/article/info', data)
</code></pre>
<ol start="2">
<li>提交时调用</li>
</ol>
<pre><code class="jsx">const onPublish = async (state) =&gt; {
  ...
  if (formModel.value.id) {
    await artEditService(fd)
    ElMessage.success('编辑成功')
    visibleDrawer.value = false
    emit('success', 'edit')
  } else {
    // 添加请求
    ...
  }
}
</code></pre>
<h2 id="文章删除"><a href="#文章删除" class="headerlink" title="文章删除"></a>文章删除</h2><ol>
<li>封装删除接口</li>
</ol>
<pre><code class="jsx">export const artDelService = (id) =&gt; request.delete('my/article/info', { params: { id } })
</code></pre>
<ol start="2">
<li>页面中添加确认框调用</li>
</ol>
<pre><code class="jsx">const onDeleteArticle = async (row) =&gt; {
  await ElMessageBox.confirm('你确认删除该文章信息吗？', '温馨提示', {
    type: 'warning',
    confirmButtonText: '确认',
    cancelButtonText: '取消'
  })
  await artDelService(row.id)
  ElMessage({ type: 'success', message: '删除成功' })
  getArticleList()
}
</code></pre>
<h1 id="ChatGPT-Copilot"><a href="#ChatGPT-Copilot" class="headerlink" title="ChatGPT &amp; Copilot"></a>ChatGPT &amp; Copilot</h1><h2 id="AI-的认知-讲解内容说明"><a href="#AI-的认知-讲解内容说明" class="headerlink" title="AI 的认知 &amp; 讲解内容说明"></a>AI 的认知 &amp; 讲解内容说明</h2><p>认知同步：</p>
<ol>
<li>AI 早已不是新事物 (接受)  =&gt;  语音识别，人脸识别，无人驾驶，智能机器人…    (包括 ChatGPT 也是研发了多年的产物)</li>
<li>AI 本质是智能工具 (认识)  =&gt;  人工智能辅助，可以提升效率，但不具备思想意识，无法从零到一取代人类工作</li>
<li>AI 一定会淘汰掉一部分人  =&gt;  逆水行舟，不进则退；学会拥抱变化，尽早上车</li>
</ol>
<p>两个工具：</p>
<ol>
<li><p>ChatGPT 3.5 的使用   (4.0 使用方式一致，回答准确度更高，但付费，且每3小时，有次数限制)</p>
<ol>
<li><p>正常注册流程  (IP限制，手机号限制)</p>
</li>
<li><p>三方整合产品</p>
<ul>
<li><p>谷歌搜索：chatgpt 免费网站列表</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/LiLittleCat/awesome-free-chatgpt">https://github.com/LiLittleCat/awesome-free-chatgpt</a></p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>工具 Github Copilot 智能生成代码</p>
</li>
</ol>
<h2 id="ChatGPT-的基本使用-Prompt-优化"><a href="#ChatGPT-的基本使用-Prompt-优化" class="headerlink" title="ChatGPT 的基本使用 - Prompt 优化"></a>ChatGPT 的基本使用 - Prompt 优化</h2><p>AI 互动的过程中，容易出现的问题：</p>
<ul>
<li>AI未能理解问题的核心要点</li>
<li>AI的回答过于宽泛 或 过于具体</li>
<li>AI提供了错误的信息或观点</li>
<li>AI未能提供有价值的建议或解决方案</li>
</ul>
<p>在识别了问题所在之后，我们可以尝试以下策略来优化我们的Prompt：</p>
<ul>
<li><p><strong>明确提问</strong>：</p>
<p>确保问题表述清晰明确，关键字的准确度，决定了AI 对于需求的理解。</p>
</li>
<li><p><strong>细化需求：</strong></p>
<p>将问题拆分成多个小问题，可以帮助AI更具针对性地回答，也利于即时纠错。</p>
</li>
<li><p><strong>添加背景信息：</strong></p>
<p>提供有关问题背景的详细信息，也可以给 AI 预设一个角色，将有助于AI生成更具深度和价值的回答。</p>
</li>
<li><p><strong>适当引导：</strong></p>
<p>比如：“例如”、“请注意”、“请使用”等，来告诉模型你期望它做什么 或者 不做什么</p>
</li>
<li><p><strong>限制范围：</strong></p>
<p>通过限定回答的范围和长度，可以引导AI生成更精炼的回答</p>
</li>
</ul>
<p>​	…</p>
<h3 id="案例-前端简历"><a href="#案例-前端简历" class="headerlink" title="案例 - 前端简历"></a>案例 - 前端简历</h3><h4 id="Prompt-优化前："><a href="#Prompt-优化前：" class="headerlink" title="Prompt 优化前："></a>Prompt 优化前：</h4><p>Prompt1:  </p>
<pre><code>前端简历
</code></pre>
<h4 id="Prompt-优化后："><a href="#Prompt-优化后：" class="headerlink" title="Prompt 优化后："></a>Prompt 优化后：</h4><p>Prompt1:  </p>
<pre><code>背景：你是一名【具有三年开发经验】的前端开发工程师，这三年期间，前两年，你做的【金融】相关四个项目，最后一年做的是【医疗】相关领域的两个项目，且有一定的管理 10人+ 团队的经验。主要的技术栈：【Vue】 和 【小程序】。由于你是计算机软件工程专业，所以你具备一些Java后台、Mysql数据库的知识，也掌握一些基础的算法。

问题：你会如何编写你的简历个人技能介绍

要求：8条技能介绍，请注意：你不会 angular。
</code></pre>
<p>Prompt2：</p>
<pre><code class="jsx">基于上文情境，你会如何编写你的项目经验介绍
</code></pre>
<p>Prompt3：</p>
<pre><code class="jsx">你刚才说的方向完全没有问题，但是我想看到更多的项目技术亮点，项目业务解决方案。
请注意：每个项目3个技术亮点，3个业务解决方案。
</code></pre>
<h2 id="工具-Github-Copilot-智能生成代码的使用"><a href="#工具-Github-Copilot-智能生成代码的使用" class="headerlink" title="工具 Github Copilot 智能生成代码的使用"></a>工具 Github Copilot 智能生成代码的使用</h2><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><ul>
<li>登录 github，试用 Copilot</li>
<li>打开 vscode， 搜索并安装插件 Copilot</li>
</ul>
<h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><ul>
<li>删除键：不接受</li>
<li>Tab键：接收</li>
<li>Ctrl + enter： 查看更多方案</li>
</ul>
<h2 id="个人中心项目实战-基本资料"><a href="#个人中心项目实战-基本资料" class="headerlink" title="个人中心项目实战 - 基本资料"></a>个人中心项目实战 - 基本资料</h2><h3 id="静态结构-校验处理"><a href="#静态结构-校验处理" class="headerlink" title="静态结构 + 校验处理"></a>静态结构 + 校验处理</h3><p>chatgpt prompt 提示词参考：</p>
<pre><code>请基于 elementPlus 和 Vue3 的语法，生成组件代码
要求：
一、表单结构要求
1.  组件中包含一个el-form表单，有四行内容，前三行是输入框，第四行是按钮
2. 第一行 label 登录名称，输入框禁用不可输入状态
3. 第二行 label 用户昵称，输入框可输入
4. 第三行 label 用户邮箱，输入框可输入
5. 第四行按钮，提交修改

二、校验需求
给昵称 和 邮箱添加校验
1. 昵称 nickname 必须是2-10位的非空字符串
2. 邮箱 email 符合邮箱格式即可，且不能为空
</code></pre>
<p>参考目标代码：</p>
<pre><code class="jsx">&lt;script setup&gt;
import { useUserStore } from '@/stores'
import { ref } from 'vue'
const {
  user: { username, nickname, email, id }
} = useUserStore()

const userInfo = ref({ username, nickname, email, id })

const rules = {
  nickname: [
    { required: true, message: '请输入用户昵称', trigger: 'blur' },
    {
      pattern: /^\S{2,10}$/,
      message: '昵称必须是2-10位的非空字符串',
      trigger: 'blur'
    }
  ],
  email: [
    { required: true, message: '请输入用户邮箱', trigger: 'blur' },
    { type: 'email', message: '邮箱格式不正确', trigger: 'blur' }
  ]
}
&lt;/script&gt;

&lt;template&gt;
  &lt;page-container title="基本资料"&gt;
    &lt;el-row&gt;
      &lt;el-col :span="12"&gt;
        &lt;el-form
          :model="userInfo"
          :rules="rules"
          ref="formRef"
          label-width="100px"
          size="large"
        &gt;
          &lt;el-form-item label="登录名称"&gt;
            &lt;el-input v-model="userInfo.username" disabled&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item label="用户昵称" prop="nickname"&gt;
            &lt;el-input v-model="userInfo.nickname"&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item label="用户邮箱" prop="email"&gt;
            &lt;el-input v-model="userInfo.email"&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item&gt;
            &lt;el-button type="primary"&gt;提交修改&lt;/el-button&gt;
          &lt;/el-form-item&gt;
        &lt;/el-form&gt;
      &lt;/el-col&gt;
    &lt;/el-row&gt;
  &lt;/page-container&gt;
&lt;/template&gt;
</code></pre>
<h3 id="封装接口，更新个人信息"><a href="#封装接口，更新个人信息" class="headerlink" title="封装接口，更新个人信息"></a>封装接口，更新个人信息</h3><ol>
<li>封装接口</li>
</ol>
<pre><code class="jsx">export const userUpdateInfoService = ({ id, nickname, email }) =&gt;
  request.put('/my/userinfo', { id, nickname, email })
</code></pre>
<ol start="2">
<li>页面中校验后，封装调用</li>
</ol>
<pre><code class="jsx">const formRef = ref()
const onSubmit = async () =&gt; {
  const valid = await formRef.value.validate()
  if (valid) {
    await userUpdateInfoService(userInfo.value)
    await getUser()
    ElMessage.success('修改成功')
  }
}
</code></pre>
<h2 id="个人中心项目实战-更换头像"><a href="#个人中心项目实战-更换头像" class="headerlink" title="个人中心项目实战 - 更换头像"></a>个人中心项目实战 - 更换头像</h2><h3 id="静态结构"><a href="#静态结构" class="headerlink" title="静态结构"></a>静态结构</h3><pre><code class="jsx">&lt;script setup&gt;
import { ref } from 'vue'
import { Plus, Upload } from '@element-plus/icons-vue'
import { useUserStore } from '@/stores'

const userStore = useUserStore()

const imgUrl = ref(userStore.user.user_pic)
const onUploadFile = (file) =&gt; {
  console.log(file)
}
&lt;/script&gt;

&lt;template&gt;
  &lt;page-container title="更换头像"&gt;
    &lt;el-row&gt;
      &lt;el-col :span="12"&gt;
        &lt;el-upload
          ref="uploadRef"
          class="avatar-uploader"
          :auto-upload="false"
          :show-file-list="false"
          :on-change="onUploadFile"
        &gt;
          &lt;img v-if="imgUrl" :src="imgUrl" class="avatar" /&gt;
          &lt;img v-else src="@/assets/avatar.jpg" width="278" /&gt;
        &lt;/el-upload&gt;
        &lt;br /&gt;
        &lt;el-button type="primary" :icon="Plus" size="large"&gt;
          选择图片
        &lt;/el-button&gt;
        &lt;el-button type="success" :icon="Upload" size="large"&gt;
          上传头像
        &lt;/el-button&gt;
      &lt;/el-col&gt;
    &lt;/el-row&gt;
  &lt;/page-container&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.avatar-uploader {
  :deep() {
    .avatar {
      width: 278px;
      height: 278px;
      display: block;
    }
    .el-upload {
      border: 1px dashed var(--el-border-color);
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: var(--el-transition-duration-fast);
    }
    .el-upload:hover {
      border-color: var(--el-color-primary);
    }
    .el-icon.avatar-uploader-icon {
      font-size: 28px;
      color: #8c939d;
      width: 278px;
      height: 278px;
      text-align: center;
    }
  }
}
&lt;/style&gt;
</code></pre>
<h3 id="选择预览图片"><a href="#选择预览图片" class="headerlink" title="选择预览图片"></a>选择预览图片</h3><pre><code class="jsx">const uploadRef = ref()
const imgUrl = ref(userStore.user.user_pic)
const onUploadFile = (file) =&gt; {
  const reader = new FileReader()
  reader.readAsDataURL(file.raw)
  reader.onload = () =&gt; {
    imgUrl.value = reader.result
  }
}
&lt;el-upload ref="uploadRef"&gt;&lt;/el-upload&gt; 
&lt;el-button
  @click="uploadRef.$el.querySelector('input').click()"
  type="primary"
  :icon="Plus"
  size="large"
  &gt;选择图片&lt;/el-button
&gt;
</code></pre>
<h3 id="上传头像"><a href="#上传头像" class="headerlink" title="上传头像"></a>上传头像</h3><ol>
<li>封装接口</li>
</ol>
<pre><code class="jsx">export const userUploadAvatarService = (avatar) =&gt; request.patch('/my/update/avatar', { avatar })
</code></pre>
<ol start="2">
<li>调用接口</li>
</ol>
<pre><code class="jsx">const onUpdateAvatar = async () =&gt; {
  await userUploadAvatarService(imgUrl.value)
  await userStore.getUser()
  ElMessage({ type: 'success', message: '更换头像成功' })
}
</code></pre>
<h2 id="个人中心项目实战-重置密码"><a href="#个人中心项目实战-重置密码" class="headerlink" title="个人中心项目实战 - 重置密码"></a>个人中心项目实战 - 重置密码</h2><p>chatgpt  prompt</p>
<pre><code class="jsx">请基于 elementPlus 和 Vue3 的语法，生成组件代码
要求：
一、表单结构要求
1. 组件中包含一个el-form表单，有四行内容，前三行是表单输入框，第四行是两个按钮
2. 第一行 label 原密码
3. 第二行 label 新密码
4. 第三行 label 确认密码
5. 第四行两个按钮，修改密码 和 重置

二、form绑定字段如下：
const pwdForm = ref({
  old_pwd: '',
  new_pwd: '',
  re_pwd: ''
})

三、校验需求
所有字段，都是 6-15位 非空
自定义校验1：原密码 和 新密码不能一样
自定义校验2：新密码 和 确认密码必须一样
</code></pre>
<h3 id="静态结构-校验处理-1"><a href="#静态结构-校验处理-1" class="headerlink" title="静态结构 + 校验处理"></a>静态结构 + 校验处理</h3><pre><code class="jsx">&lt;script setup&gt;
import { ref } from 'vue'
const pwdForm = ref({
  old_pwd: '',
  new_pwd: '',
  re_pwd: ''
})

const checkOldSame = (rule, value, cb) =&gt; {
  if (value === pwdForm.value.old_pwd) {
    cb(new Error('原密码和新密码不能一样!'))
  } else {
    cb()
  }
}

const checkNewSame = (rule, value, cb) =&gt; {
  if (value !== pwdForm.value.new_pwd) {
    cb(new Error('新密码和确认再次输入的新密码不一样!'))
  } else {
    cb()
  }
}
const rules = {
  // 原密码
  old_pwd: [
    { required: true, message: '请输入密码', trigger: 'blur' },
    {
      pattern: /^\S{6,15}$/,
      message: '密码长度必须是6-15位的非空字符串',
      trigger: 'blur'
    }
  ],
  // 新密码
  new_pwd: [
    { required: true, message: '请输入新密码', trigger: 'blur' },
    {
      pattern: /^\S{6,15}$/,
      message: '密码长度必须是6-15位的非空字符串',
      trigger: 'blur'
    },
    { validator: checkOldSame, trigger: 'blur' }
  ],
  // 确认新密码
  re_pwd: [
    { required: true, message: '请再次确认新密码', trigger: 'blur' },
    {
      pattern: /^\S{6,15}$/,
      message: '密码长度必须是6-15位的非空字符串',
      trigger: 'blur'
    },
    { validator: checkNewSame, trigger: 'blur' }
  ]
}
&lt;/script&gt;
&lt;template&gt;
  &lt;page-container title="重置密码"&gt;
    &lt;el-row&gt;
      &lt;el-col :span="12"&gt;
        &lt;el-form
          :model="pwdForm"
          :rules="rules"
          ref="formRef"
          label-width="100px"
          size="large"
        &gt;
          &lt;el-form-item label="原密码" prop="old_pwd"&gt;
            &lt;el-input v-model="pwdForm.old_pwd" type="password"&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item label="新密码" prop="new_pwd"&gt;
            &lt;el-input v-model="pwdForm.new_pwd" type="password"&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item label="确认新密码" prop="re_pwd"&gt;
            &lt;el-input v-model="pwdForm.re_pwd" type="password"&gt;&lt;/el-input&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item&gt;
            &lt;el-button @click="onSubmit" type="primary"&gt;修改密码&lt;/el-button&gt;
            &lt;el-button @click="onReset"&gt;重置&lt;/el-button&gt;
          &lt;/el-form-item&gt;
        &lt;/el-form&gt;
      &lt;/el-col&gt;
    &lt;/el-row&gt;
  &lt;/page-container&gt;
&lt;/template&gt;
</code></pre>
<h3 id="封装接口，更新密码信息"><a href="#封装接口，更新密码信息" class="headerlink" title="封装接口，更新密码信息"></a>封装接口，更新密码信息</h3><ol>
<li>封装接口</li>
</ol>
<pre><code class="jsx">export const userUpdatePassService = ({ old_pwd, new_pwd, re_pwd }) =&gt;
  request.patch('/my/updatepwd', { old_pwd, new_pwd, re_pwd })
</code></pre>
<ol start="2">
<li>页面中调用</li>
</ol>
<pre><code class="jsx">const formRef = ref()
const router = useRouter()
const userStore = useUserStore()
const onSubmit = async () =&gt; {
  const valid = await formRef.value.validate()
  if (valid) {
    await userUpdatePassService(pwdForm.value)
    ElMessage({ type: 'success', message: '更换密码成功' })
    userStore.setToken('')
    userStore.setUser({})
    router.push('/login')
  }
}
const onReset = () =&gt; {
  formRef.value.resetFields()
}
</code></pre>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2023/12/21/Termux%E7%BB%88%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Termux终端学习笔记"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: Termux终端学习笔记</span></a><a class="button is-default" href="/2023/12/19/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="微信小程序学习笔记"><span class="has-text-weight-semibold">下一页: 微信小程序学习笔记</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/Blackcat-love"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> 天明 2024</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>